<?xml version="1.0"?>

<!-- GFDL Model Development Team (MDT) documentation: http://cobweb.gfdl.noaa.gov/~niz/mdt/ -->
<!-- GFDL MDT Atmosphere Working Group (AWG) documentation: http://cobweb.gfdl.noaa.gov/~cjg/awg/ -->

<!-- Model configurations in support of MDT Atmosphere Working Group (AWG), v20170216 revision -->
<!-- ZNT: v20190218: To add BOMEX case -->

<!--
     Log: yi-hsuan
     2020/05/22
         1. Get this XML file from Zhihong Tan. The original path:
           /ncrc/home2/Zhihong.Tan/awg/xanadu/scm_xanadu_xml_miz0507
         2. Changed the pathes in ncrc4.intel to make the SCM_COMP_EXP in the pathes so that different
            version of SCM don't share the same path.
-->

<!--

===============================================================================
             xml for awg verona v20170216 SCM release
===============================================================================

QUICK START GUIDE:

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# To checkout this xml (you should have done this already)
# .. module load fre/bronx-15
# .. module load git
# .. mkdir -p $home/awg/verona
# .. cd $home/awg/verona
# .. git clone -b scm_verona_xml https://gitlab.gfdl.noaa.gov/scm/xml.git xml_v20170216_bx15
# .. cd xml_v20170216_bx15
#
# Change YOURGROUPLETTER to your group, such as f, w, o...
#    <project>gfdl_YOURGROUPLETTER</project>
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Using awg_v20170216.xml, check out source code and compile global model using "-t openmp" (do this ):
#
# .. module load fre/bronx-15
# .. fremake -x awg_v20170216.xml -p ncrc3.intel -t openmp cm4p12_v20170216_bx15
#
# Make a compile script to submit to compile the global model using "-t repro" for SCM:
#
# .. fremake -x awg_v20170216.xml -p ncrc3.intel -t repro cm4p12_v20170216_bx15
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# To run a global model regression test using "-t openmp":
# .. frerun -x awg_v20170216.xml -r basic -p ncrc3.intel -t openmp c96L32_am4g12r17
#
# To run a complete experiment (with automated database entry if MDBIswitch in "on"):
# .. frerun -x awg_v20170216.xml -p ncrc3.intel -t openmp c96L32_am4g12r17
#
# To run fredb after an experiment is finished to manually add it to the database:
# .. fredb-pp -x awg_v20170216.xml -p gfdl.ncrc3-intel -t openmp c96L32_am4g12r17
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Using this awg_v20170216_withSCM.xml, check out source code and make a compile script
# to submit to compile the SCM using "-t repro" to make a "repro" SCM_AM4_base_v20170216_bx15 executable:
#
# .. fremake -x awg_v20170216_withSCM.xml -p ncrc3.intel -t repro SCM_AM4_base_v20170216_bx15
#
# Optional: Use fremake to make a compile script to compile the SCM using "-t openmp"
# to make an "openmp" SCM_AM4_base_v20170216_bx15 executable (for ulm_201505/SCM_AM4_base_v20160510c,
# I found "-t repro" to be better; see notes for June 30, 2016 and July 1, 2016 in
# /ncrc/home2/Charles.Seman/awg/ulm_201505/readme):
#
# .. fremake -x awg_v20170216_withSCM.xml -p ncrc3.intel -t openmp SCM_AM4_base_v20170216_bx15
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Define SCM models and their input datasets (see "specify SCM global model" below)
#
#  * define property name "AWG_EXPERIMENT" and its value for each desired global model;
#    for example:
#
#    <property name="AWG_EXPERIMENT" value="c96L32_am4g11r11" />
#
#    list of available "AWG_EXPERIMENT" models: c96L48_am4b6_DDFull, c96L32_am4b6_DDLite,
#    c96L32_am4g11r11, c96L32_am4g11r20, c96L32_am4g12r04, c96L32_am4g12r17, c96L32_am4g12r18
#
#  * define the SCM input datasets within each of the TWP-ICE, MC3E, and GATE experiments
#    for each "AWG_EXPERIMENT" global model (or group of models) as needed
#    by using what has been defined for the global "AWG_EXPERIMENT" input datasets
#
#    1) input datasets common to the list of defined "AWG_EXPERIMENT" global models
#       ... list of xi:include xpointer freInclude name lines, chosen from previously defined global freInclude name entities ...
#
#    2) input datasets for each "AWG_EXPERIMENT" global model or group of models (as desired)
#  	... list of xi:include xpointer freInclude name lines, chosen from previously defined global freInclude name entities ...
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
# Run experiment TWP_forcS_c96L32_am4g11r11 (similar for MC3E, GATE, and various "forc" experiments)
#
#  * specify "AWG_EXPERIMENT" (uncomment only one) and NMODEL_LEVELS:
#
#    <property name="AWG_EXPERIMENT" value="c96L32_am4g11r11" />
#
#    <property name="NMODEL_LEVELS"  value="32" />
#
#  * these should be uncommented:
#
#    <property name="DO_MG_DRAG" value=".true." />
#    <property name="DO_TOPO_ROUGH" value=".false." />
#    <property name="TOPO_ROUGH_FILE" value="mg_drag.res.nc" />
#
#  * within experiment name="TWP_forcS_$(AWG_EXPERIMENT)" uncomment only the xi:include lines
#    for "use for AM4 prototype configuration g11r11 AMIP experiments"
#    (comment out similar xi:include lines for other AWG_EXPERIMENT global models):
#
#  * frerun SCM experiment TWP_forcS_c96L32_am4g11r11 (similar for MC3E, GATE, and various "forc" experiments):
#
#    .. module load fre/bronx-15
#    .. frerun -x awg_v20170216_withSCM.xml -r basic -p ncrc3.intel -t repro TWP_forcS_c96L32_am4g11r11
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

-->

<!-- LIST OF AUTOMATED TESTS TO BE PERFORMED WITH JENNY
     Notes: Only fremake and frerun are currently supported.
            FRE commands listed should NOT include -s option to
            automatically sumbit jobs.

! Reference results for automated tests. Jenny will verify the sha1 checksum of the
! diag-integral.out ascii file against the checksums listed below. The checksum
! can be computed with the 'taverage' AWG utility.

On gaea c3
ref> c96L32_am4g11r11/ncrc3.intel-prod-openmp/0m8d                       a85b628a3c616261ae5c2a8bfccbdd6b9460a7c4
ref> c96L32_am4g11r20/ncrc3.intel-prod-openmp/0m8d                       5350f28f36d2f3b733bfcb22081a624500e3a053

ref> c96L32_am4g12r04/ncrc3.intel-prod-openmp/0m8d                       da3111680f656b821810a5f4a7e021462ab59750
ref> c96L32_am4g12r16/ncrc3.intel-prod-openmp/0m8d                       5312039470144b1707e0d34755bbfcf2a1b636a6
ref> c96L32_am4g12r17/ncrc3.intel-prod-openmp/0m8d                       ce19bda53c7f99335f89eed26f825cf9a8de6d99
ref> c96L32_am4g12r18/ncrc3.intel-prod-openmp/0m8d                       d14c5a088136a2d697bd7c088820942bfc4215d2

ref> c96L32_am4g11r11_2010climo/ncrc3.intel-prod-openmp/0m8d             55b7ffe513b27251d855354f62b3830eef2e8233
ref> c96L32_am4g11r20_2010climo/ncrc3.intel-prod-openmp/0m8d             e8de3416431834728ea8b78477004492c017a230

ref> c96L32_am4g12r04_2010climo/ncrc3.intel-prod-openmp/0m8d             2ef5d68859d5cd954bd7c87985568b6be90a34d2
ref> c96L32_am4g12r16_2010climo/ncrc3.intel-prod-openmp/0m8d             6f3f0004ae4b80ee726ce412770f9eafa36f0049
ref> c96L32_am4g12r17_2010climo/ncrc3.intel-prod-openmp/0m8d             09eb30ed3082c8ea988b4f489f43b7d3a6e41ff9
ref> c96L32_am4g12r18_2010climo/ncrc3.intel-prod-openmp/0m8d             adcffed5cbe3367337c8caafa372199b24b611f0

ref> c96L32_am4g12r04_1850climo/ncrc3.intel-prod-openmp/0m8d             4b75533773bed50a5e221baa01885f665d2c2a71
ref> c96L32_am4g12r17_1850climo/ncrc3.intel-prod-openmp/0m8d             2369e69fd60a0551f49b13e960fbd5faa63cc065

ref> c96L32_am4g12r04_2010aero/ncrc3.intel-prod-openmp/0m8d              7693b52c7bc2256e73e8a44d5cf40fad4c9f7087
ref> c96L32_am4g12r17_2010aero/ncrc3.intel-prod-openmp/0m8d              00db8792393b62faac07c5fe0f70ee4a0ae24554
-->

<experimentSuite rtsVersion="4" xmlns:xi="http://www.w3.org/2003/XInclude">

  <property name="GFDL_YGL" value="gfdl_m"/> 
  <property name="RELEASE" value="xanadu"/>                              <!-- base code release -->
  <property name="MOM6_DATE" value="om4_v1.0.1"/>                        <!-- git tag date for MOM6 source code -->
  <property name="MOM6_GIT_TAG" value="dev/gfdl/2018.04.06"/>        <!-- git tag for MOM6 source code -->
  <property name="AWG_GIT_TAG" value="xanadu"/>                   <!-- git tag for AWG source code -->
  <property name="AWG_BASE" value="cm4p0" />
  <property name="AWG_VERSION" value="xanadu"/>                       <!-- AWG source code version -->
  <property name="CM4_GIT_TAG" value="xanadu"/>  <!-- git tag for CJS source code -->
  <property name="ANALYSIS_ESM_SWITCH" value="off"/>
  <property name="TS_ANALYSIS_SWITCH" value="off"/>

  <property name="EXP_AMIP_START" value="1999"/>
  <property name="EXP_AMIP_END"   value="2000"/>
  <property name="EXP_AMIP_LEN"   value="2"/>
  <property name="ANA_AMIP_START" value="2000"/>
  <property name="ANA_AMIP_END"   value="2000"/>
  <property name="ANA_AMIP_LEN"   value="1yr"/>
  <property name="CVDP_startyear" value="$(EXP_AMIP_START)"/>
  <property name="CVDP_startyear_climo" value="0001"/>

  <property name="FRE_STEM" value="awg/$(RELEASE)"/>
  <property name="FRE_VERSION" value="bronx-18"/>
  <property name="FMS_COMP_EXP" value="cm4p0_xanadu"/>

  <property name="ANALYSIS_SWITCH" value="on"/>
  <property name="MDBIswitch" value="off"/>                        <!-- on/off switch for MDBI database -->
  <property name="ProjectID" value="AWG"/>                         <!-- database top level -->

  <!-- yi-hsuan XML file settings -->
  <property name="XMLDIR_NAME"    value="xml_xanadu_SCM"/>  <!-- XML directory name. The XML directoy is ~/awg/xanadu/$(XMLDIR_NAME)  -->         

  <property name="SCM_GIT_TAG"    value="xanadu"/>          <!-- git tag for SCM source code -->
  <property name="SCM_DATA_ROOT"  value="$DEV/William.Cooke" />
  <property name="SCM_COMP_EXP"   value="SCM_am4_xanadu_mf_qmf"/>
  <property name="MODEL_COMP_EXP" value="$(SCM_COMP_EXP)"/>
  <property name="SCM_SRC"        value="$HOME/$(FRE_STEM)/$(SCM_COMP_EXP)/src" />
  <property name="SCM_INCLUDE"    value="$HOME/awg/xanadu/$(XMLDIR_NAME)/awg_include/scm_include" />
  <property name="SCM_EXECUTABLE" value="$DEV/$USER/$(FRE_STEM)/$(SCM_COMP_EXP)/$(platform)-$(target)/exec/fms_$(SCM_COMP_EXP).x"/>

  <property name="AWG_INPUT_HOME_GAEA" value="$HOME/$(FRE_STEM)/$(XMLDIR_NAME)/awg_include"/>
  <property name="AWG_INPUT_HOME_GFDL" value="/home/$USER/ncrc/$(FRE_STEM)/xml_xanadu_SCM_miz0507/awg_include"/> <!-- unused -->
  <!-- yi-hsuan XML file settings -->

<!--
GFDL FAIR USE POLICY

GFDL recognizes the essential nature of collaboration in the scientific
enterprise, including the importance of novel application and analysis of our
models. In order to maximize mutual benefit from collaboration, the use of
experimental GFDL models** should be done in a manner that ensures that
individuals involved in model development receive proper credit for their
work; in order to minimize the potential for misapplication of experimental
models, collaborations should actively engage model developers. Publication of
results using experimental GFDL models should be done in consultation with
scientists that participated in the model development. Consultation with GFDL
model developers should occur before submission of publications based on
experimental GFDL models, and should include agreement on the appropriate level
of acknowledgment, co-authorship and participation by the model developers.
Since experimental models have not been thoroughly vetted, experimental GFDL
models and their output should be distributed only after consultation with the
developers of the model. After a GFDL model has been described in a
peer-reviewed publication it is no longer experimental, and results based on
the model should cite the publication(s) describing the model.

** "Experimental GFDL models" refers to models (e.g., a coupled climate model),
model components (e.g., parameterization schemes), model configurations (e.g.,
the specific arrangement and parameter settings of model components) arising
from model development efforts at GFDL, but whose formulation and configuration
have not yet been documented in the peer-reviewed literature, as well as outputs
from integrations with these models.
-->

<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->

<!--
AMIP simulations are configured to start in 1980 with the first year being a
spin-up year. Postprocessing and analysis are performed starting in 1981. The
length of the simulation and analysis period can be controlled by changing
properties below.
-->

   
  <!-- Post-processing chunk length -->
  <!-- ANA_AMIP_LEN must be an integer multiple of PP_AMIP_CHUNK -->
  <property name="PP_AMIP_CHUNK" value="5yr"/>

<!--=====================================-->
<!--= RFP, CESS SENSITIVITY EXPERIMENTS =-->
<!--=====================================-->

<!--
Experiments to compute RFP (Radiative Flux Perturbation) and Cess sensitivity
were originally configured by Larry Horowitz. Experiments are configured to
start in year 0001, postprocessing and analysis are performed starting from
the second year (0002). The length of the simulation and analysis period can
be controlled by changing properties below.
-->

  <!-- make sure to change current_date in coupler_nml accordingly -->
  <property name="EXP_CLIMO_START" value="0001"/>
  <property name="EXP_CLIMO_END"   value="0011"/>
  <property name="EXP_CLIMO_LEN"   value="11"/>
  <property name="ANA_CLIMO_START" value="0002"/>
  <property name="ANA_CLIMO_END"   value="0011"/>
  <property name="ANA_CLIMO_LEN"   value="10yr"/>
  <property name="PP_CLIMO_CHUNK"  value="5yr"/>

  <property name="EXP_CCLIMO_START" value="0001"/>
  <property name="EXP_CCLIMO_END"   value="0140"/>
  <property name="EXP_CCLIMO_LEN"   value="140"/>
  <property name="ANA_CCLIMO_START" value="0001"/>
  <property name="ANA_CCLIMO_END"   value="0140"/>
  <property name="ANA_CCLIMO_LEN"   value="20yr"/>
  <property name="PP_CCLIMO_CHUNK"  value="5yr"/>
  <property name="PP_CCLIMO_CHUNK_B" value="20yr"/>
  <property name="PP_OCEAN_CHUNK"   value="5yr"/>
  <property name="PP_OCEAN_CHUNK_B" value="20yr"/>
  <property name="ANA_CCLIMO_BQX"   value="0020"/>

<!--=================-->
<!--= CHANGING NPES =-->
<!--=================-->

<!--
This xml includes a number of predefined options for the number of PEs.
Changing the number of PEs can be accomplished by simply
modifying 'npes' and segment 'runTime' in the xml <production> block:

    <production simTime="$(EXP_AMIP_LEN)" units="years" npes="864" runTime="16:00:00">
      <segment simTime="12" units="months" runTime="1:30:00"/>
    </production>

Choosing a particular PE number is a balancing act. The higher npes,
the faster the model throughput, but also the lower the model efficiency
(i.e. the overall simulation will cost more in terms of core hours).

Available options for c96L32:
"""""""""""""""""""""""""""""

  +========+======================+======================+
  |        |  Suggested run time for 12 month segment    |
  |  npes  |    am4g10                                   |
  +========+=============================================+
  |   432  |    02:30:00                                 |
  |** 864**|    01:30:00                                 |
  |  1152  |    01:10:00                                 |
  |  1728  |    00:50:00                                 |
  |  2304  |    00:45:00                                 |
  |  3456  |    00:40:00                                 |
  |  4608  |    00:32:00                                 |
  +========+======================+======================+

**Note:** default settings are highlighted in **bold**. Suggested
run time values may need to be adjusted for your specific
configuration.
-->
  <setup>

<!-- MDBI -->
    <fmsRelease>fmsversion</fmsRelease>
<!-- /MDBI -->
    <platform name="gfdl.ncrc3-intel">
      <freVersion>$(FRE_VERSION)</freVersion>
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <!--archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive-->
        <archive>$ARCHIVE/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)</archive>  <!-- yi-hsuan -->
        <analysis>/nbhome/$USER/$(stem)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/archive/oar.gfdl.cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/archive/h1g/mdt"/>
      <property name="NCORE_PER_NODE"      value="1"/>
      <csh><![CDATA[
        module load git
        ]]>
      </csh>
    </platform>

    <platform name="ncrc3.intel16">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="16.0.3.210" />
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/$(XMLDIR_NAME)/scripts</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g  "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/lustre/f2/pdata/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="32"/>
      <csh><![CDATA[
        module load git
#
       setenv KMP_STACKSIZE 512m
       setenv NC_BLKSZ 1M
       setenv OMP_SCHEDULE "static,1"

      ]]></csh>
    </platform>

    <platform name="ncrc3.intel17">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="17.0.4.196" />
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/$(XMLDIR_NAME)/scripts</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/lustre/f2/pdata/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="32"/>
      <csh><![CDATA[
       setenv OMP_SCHEDULE "static,1"
      ]]></csh>
    </platform>


    <platform name="ncrc3.intel">
      <xi:include xpointer="xpointer(//setup/platform[@name='ncrc3.intel16']/node())" />
    </platform>
    <platform name="gfdl.ncrc3-intel17">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.ncrc3-intel']/node())" />
    </platform>
    <platform name="gfdl.ncrc3-intel16">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.ncrc3-intel']/node())" />
    </platform>


    <platform name="ncrc4.intel16">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="16.0.3.210" />
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <!--  original pathes src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/$(XMLDIR_NAME)/scripts</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout-->

         <!-- yi-hsuan set new pathes, based on xanadu CM4 -->
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/$(XMLDIR_NAME)/scripts</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
         <state>$DEV/$USER/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
         <archive>$DEV/$USER/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
         <postProcess>$DEV/$USER/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
         <analysis>$DEV/$USER/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)/analysis</analysis>         
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g  "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/lustre/f2/pdata/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="36"/>
      <csh><![CDATA[
        module load git
#
       setenv KMP_STACKSIZE 512m
       setenv NC_BLKSZ 1M
       setenv OMP_SCHEDULE "static,1"

      ]]></csh>
    </platform>

    <platform name="ncrc4.intel">
      <xi:include xpointer="xpointer(//setup/platform[@name='ncrc4.intel16']/node())" />
    </platform>
    <platform name="gfdl.ncrc4-intel">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.ncrc3-intel']/node())" />
    </platform>
    <platform name="gfdl.ncrc4-intel16">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.ncrc3-intel']/node())" />
    </platform>

    <platform name="ncrc4.intel17">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="17.0.4.196" />
<!-- Please make sure to change "YOURGROUPLETTER" to your group, such as b, f, g, m, o... -->
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/$(XMLDIR_NAME)/scripts</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/lustre/f2/pdata/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="36"/>
      <csh><![CDATA[
        module load git
#
       setenv KMP_STACKSIZE 512m
       setenv NC_BLKSZ 1M
       setenv OMP_SCHEDULE "static,1"

      ]]></csh>
    </platform>
    <platform name="gfdl.ncrc4-intel17">
      <freVersion>$(FRE_VERSION)</freVersion>
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <!--archive>$ARCHIVE/$(stem)/$(name)/$(platform)-$(target)</archive-->
        <archive>$ARCHIVE/$(stem)/$(SCM_COMP_EXP)/$(name)/$(platform)-$(target)</archive>  <!-- yi-hsuan -->
        <analysis>/nbhome/$USER/$(stem)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/archive/oar.gfdl.cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/archive/h1g/mdt"/>
      <property name="NCORE_PER_NODE"      value="1"/>
      <csh><![CDATA[
        module load git
        ]]>
      </csh>
    </platform>
<!-- GNU (GCC) -->

<!-- yihsuan add new platforms, 2020-06-22 -->
    <platform name="ncrc3.intel18">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="18.0.6.288" />
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/scm_xanadu_xml_miz0507/scripts/$(platform)-$(target)</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
         <state>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
         <archive>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
         <postProcess>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
         <analysis>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/analysis</analysis>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g  "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M"/>
      <property name="CJG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"  value="$PDATA/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="32"/>
      <csh><![CDATA[
        module load git
#
       setenv KMP_STACKSIZE 512m
       setenv NC_BLKSZ 1M
       setenv OMP_SCHEDULE "static,1"

      ]]></csh>
    </platform>

    <platform name="ncrc3.intel19">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="19.0.5.281" />
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/scm_xanadu_xml_miz0507/scripts/$(platform)-$(target)</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
         <state>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
         <archive>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
         <postProcess>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
         <analysis>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/analysis</analysis>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M"/>
      <property name="CJG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"  value="$PDATA/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="32"/>
      <csh><![CDATA[
       setenv OMP_SCHEDULE "static,1"
      ]]></csh>
    </platform>

    <platform name="ncrc4.intel18">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="18.0.6.288" />
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/scm_xanadu_xml_miz0507/scripts/$(platform)-$(target)</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
         <state>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
         <archive>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
         <postProcess>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
         <analysis>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/analysis</analysis>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML -g  "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M"/>
      <property name="CJG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"  value="$PDATA/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="36"/>
      <csh><![CDATA[
        module load git
#
       setenv KMP_STACKSIZE 512m
       setenv NC_BLKSZ 1M
       setenv OMP_SCHEDULE "static,1"

      ]]></csh>
    </platform>

    <platform name="ncrc4.intel19">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="intel" version="19.0.5.281" />
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/scm_xanadu_xml_miz0507/scripts/$(platform)-$(target)</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
         <state>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
         <archive>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
         <postProcess>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
         <analysis>$DEV/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/analysis</analysis>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M"/>
      <property name="CJG_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"  value="$PDATA/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="$PDATA/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="36"/>
      <csh><![CDATA[
module load git
module load gcp
#
       setenv KMP_STACKSIZE 512m
       setenv NC_BLKSZ 1M
       setenv OMP_SCHEDULE "static,1"

      ]]></csh>
    </platform>

    <platform name="gfdl.ncrc4-intel18">
      <freVersion>$(FRE_VERSION)</freVersion>
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <scripts>/home/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/scripts</scripts>
        <stdout>/home/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
        <state>/home/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
        <archive>$ARCHIVE/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
        <postProcess>$ARCHIVE/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
        <analysis>/nbhome/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive"/>
      <property name="CJG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"  value="/archive/oar.gfdl.cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/archive/h1g/mdt"/>
      <property name="NCORE_PER_NODE"      value="1"/>
      <csh><![CDATA[
        module load git
        ]]>
      </csh>
    </platform>


    <platform name="gfdl.ncrc4-intel19">
      <freVersion>$(FRE_VERSION)</freVersion>
      <directory stem="$(FRE_STEM)">
<!-- MDBI requires these to be listed in order to show the path under "Platform Environment" -->
        <scripts>/home/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/scripts</scripts>
        <stdout>/home/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/stdout</stdout>
        <state>/home/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/state</state>
        <archive>$ARCHIVE/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)</archive>
        <postProcess>$ARCHIVE/$(stem)/$(MODEL_COMP_EXP)/$(name)/$(platform)-$(target)/pp</postProcess>
        <analysis>/nbhome/$USER/$(stem)/$(MODEL_COMP_EXP)/$(name)</analysis>
<!-- /MDBI -->
      </directory>
      <property name="F2003_FLAGS"         value="-DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GFDL)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/archive"/>
      <property name="CJG_ARCHIVE_ROOT"    value="/archive/cjg/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"  value="/archive/oar.gfdl.cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/archive/h1g/mdt"/>
      <property name="NCORE_PER_NODE"      value="1"/>
      <csh><![CDATA[
        module load git
        ]]>
      </csh>
    </platform>
<!-- yihsuan add new platforms, 2020-06-22 -->


    <platform name="gfdl.ncrc4-gnu">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.ncrc3-intel']/node())" />
    </platform>

    <platform name="ncrc4.gnu">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="gnu" version="7.3.0" />
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/xml_$(AWG_VERSION)/scripts/$(platform)-$(target)</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/lustre/f2/pdata/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="36"/>
    </platform>

    <platform name="gfdl.ncrc3-gnu">
      <xi:include xpointer="xpointer(//setup/platform[@name='gfdl.ncrc3-intel']/node())" />
    </platform>
    <platform name="ncrc3.gnu">
      <freVersion>$(FRE_VERSION)</freVersion>
      <compiler type="gnu" version="7.3.0" />
      <project>$(GFDL_YGL)</project>
      <directory stem="$(FRE_STEM)">
         <src>$HOME/$(stem)/$(name)/src</src>
         <scripts>$HOME/$(stem)/xml_$(AWG_VERSION)/scripts/$(platform)-$(target)</scripts>
         <stdout>$SCRATCH/$USER/$(stem)/$(name)/$(platform)-$(target)/stdout</stdout>
      </directory>
      <property name="F2003_FLAGS"         value=" -DINTERNAL_FILE_NML "/>
      <property name="AWG_INPUT_HOME"      value="$(AWG_INPUT_HOME_GAEA)"/>
      <property name="AWG_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/cjg/archive/mdt"/>
      <property name="CMIP6_ARCHIVE_ROOT"   value="/lustre/f2/pdata/gfdl/cmip6/datasets"/>
      <property name="H1G_ARCHIVE_ROOT"    value="/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt"/>
      <property name="NCORE_PER_NODE"      value="32"/>
    </platform>

  </setup>


<!--===========-->
<!--= COMPILE =-->
<!--===========-->

  <!--The property MOM6_EXAMPLES should point to the mom6 directory that is checked out. It is needed by MOM6 to access its inpu data files-->
  <property name="MOM6_EXAMPLES"  value="$root/cm4_compile/src/mom6"/>

  <experiment name="cm4p0_$(AWG_VERSION)">
    <description>

Experiment to build executable. See git log for source code provenance.

    </description>

    <component name="fms" paths="FMS">
     <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="https://github.com/NOAA-GFDL">
        <codeBase version="$(RELEASE)"> FMS.git </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_libMPI -Duse_netCDF </cppDefs>
      </compile>
    </component>

    <component name="atmos_phys" requires="fms" paths="atmos_param atmos_shared">
      <description domainName="" communityName="" communityVersion="$(RELEASE)" communityGrid=""/>
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="master">atmos_shared.git atmos_param.git</codeBase>
          <csh><![CDATA[
            ( cd atmos_shared && git checkout  $(AWG_GIT_TAG) )
            ( cd atmos_param  && git checkout  $(AWG_GIT_TAG) )
                       ]]>
          </csh>
        </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DCLUBB </cppDefs>
	<srcList>
          $HOME/awg/xanadu/xml_xanadu/code_update/uw_conv.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/conv_utilities_k.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/conv_plumes_k.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/deep_conv.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/conv_plumes.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/conv_utilities.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/conv_closures.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/lscloud_driver.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/moist_processes.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/ls_cloud_macrophysics.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/ls_cloud_microphysics.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/vert_diff.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/vert_turb_driver.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/CLUBB_driver_SCM.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/cloud_rad.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/cldwat2m_micro.F90
          $HOME/awg/xanadu/xml_xanadu/code_update/micro_mg.F90
	</srcList>
      </compile>
    </component>

    <component name="atmos_dyn" paths="atmos_drivers/coupled
                                       atmos_cubed_sphere/driver/coupled
                                       atmos_cubed_sphere/model
                                       atmos_cubed_sphere/model_nh_null
                                       atmos_cubed_sphere/tools
                                       atmos_cubed_sphere/GFDL_tools"
                                requires="fms atmos_phys">
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master">atmos_drivers.git atmos_cubed_sphere.git</codeBase>
        <csh><![CDATA[
          ( cd atmos_drivers && git checkout       $(AWG_GIT_TAG) )
          ( cd atmos_cubed_sphere && git checkout  $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DSPMD -DCLIMATE_NUDGE</cppDefs>
      </compile>
    </component>

    <component name="ice_sis" requires="fms mom6" paths="ice_sis ice_param">
      <description domainName="Sea Ice SIS" communityName="GFDL-SIS" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master"> ice_sis.git ice_param.git </codeBase>
        <csh><![CDATA[
          ( cd ice_sis    && git checkout $(AWG_GIT_TAG) )
          ( cd ice_param  && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_netCDF</cppDefs>
      </compile>
    </component>

    <component name="land_lad2" requires="fms" paths="land_lad2">
      <description domainName="LM3" communityName="land_lad2" communityVersion="dev/master" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master">land_lad2.git</codeBase>
        <csh><![CDATA[
          ( cd land_lad2 && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile doF90Cpp="yes">
       <cppDefs>$(F2003_FLAGS) -nostdinc</cppDefs>
      </compile>
    </component>

    <component name="mom6" requires="fms" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/ ocean_shared/generic_tracers ocean_shared/mocsy/src">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master"> ocean_shared.git </codeBase>
        <csh><![CDATA[
          git clone -b $(MOM6_GIT_TAG) https://github.com/NOAA-GFDL/MOM6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6 src/SIS2 src/icebergs tools/python/MIDAS
          git clone --recursive https://github.com/NOAA-GFDL/MOM6.git src/MOM6 
          git clone             https://github.com/NOAA-GFDL/SIS2.git src/SIS2
          git clone             https://github.com/NOAA-GFDL/icebergs.git src/icebergs
          git submodule update #This gets the right version of submodules
          popd

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
            ln -s /scratch4/GFDL/gfdlscr/pdata/gfdl_O/datasets/ .datasets
          else if ("${platform_domain}" =~ *"ccs.ornl.gov"* ) then
            ln -s /lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f2/pdata/gfdl/gfdl_O/datasets/ .datasets
          endif
          popd   

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
 
        ]]></csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -DMAX_FIELDS_=100 -DNOT_SET_AFFINITY -D_USE_MOM6_DIAG -D_USE_GENERIC_TRACER  -DUSE_PRECISION=2 -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>

    <component name="coupler" paths="coupler" 
               requires="fms atmos_dyn atmos_phys land_lad2 ice_sis mom6 ">
      <description domainName="FMS Coupler" communityName="coupler" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="https://github.com/NOAA-GFDL">
        <codeBase version="$(RELEASE)"> coupler.git </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS)</cppDefs>
      </compile>
    </component>

  </experiment>

<!--============================-->
<!--= TEMPLATES FOR INPUT DATA =-->
<!--============================-->
  <freInclude name="common_LM4">
    <input>
      <dataFile label="input" target="INPUT/soil_type.nc" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/soil_type_hwsd_5minute.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/biodata.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/cover_type.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/geohydrology.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/geohydrology_table_2a2n.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/ground_type.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/landuse.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_LM4/soil_brdf.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96_LM4">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/c96_LM4/19810101.static_veg_LM3p2sosn_HWSD5min_C96_OM4_025.v20150930.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/c96_LM4/c96_OM4_025_hydrography_v20170413.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/c96_LM4/c96_topo_rough_land.nc.tar</dataSource>
     </dataFile>
    </input>
  </freInclude>

 <freInclude name="common_AM4_v20170208">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_AM4/sea_esf_CM4_V6_AUG2015.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_AM4/aerosol_inputs_newdroplet2_v20170208.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_AM4/tropchem_dec2015.cpio</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_AM4/depvel_gc_am3_tran.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_AM4/so2_0.25_volcanoes.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/AM4_201510" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/common_AM4/am4_optical_table_20151029.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="common_cmip6">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/common_cmip6/cmip6_GHG_ODS_conc_2016.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/chemlbf" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/common_cmip6/chemlbf_CMIP6_merge_RCP45</dataSource>
      </dataFile>

      <dataFile label="input" target="INPUT/o3.climatology.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/common_cmip6/mmro3_CMIP6_184901-201512.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/common_cmip6/emissions.isoprene.1x1.2000.nc</dataSource>
      </dataFile>
       <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/common_cmip6/emissions.terpenes.1x1.2000.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="Volcano_Solar_TimeSeries_cmip6">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/extsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/omgsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/asmsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/extlw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Solar/lean_solar_spectral_data.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="Volcano_Solar_TimeSeries_cmip6_v2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_TimeSeries_cmip6_v2/extsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_TimeSeries_cmip6_v2/omgsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_TimeSeries_cmip6_v2/asmsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_TimeSeries_cmip6_v2/extlw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_TimeSeries_cmip6_v2/lean_solar_spectral_data.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>



  <freInclude name="Volcano_Solar_2010_cmip6">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/AVG_2010/extsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/AVG_2010/omgsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/AVG_2010/asmsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Volcano/AVG_2010/extlw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/David.Paynter/CMIP6_INPUT/Solar/AVG_2010/lean_solar_spectral_data.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="Volcano_Solar_2010_cmip6_v2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_2010_cmip6_v2/extsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_2010_cmip6_v2/omgsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_2010_cmip6_v2/asmsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_2010_cmip6_v2/extlw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_2010_cmip6_v2/lean_solar_spectral_data.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="Volcano_Solar_1850_cmip6">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6/extsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6/omgsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6/asmsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6/extlw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6/lean_solar_spectral_data.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="Volcano_Solar_1850_cmip6_v2">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6_v2/extsw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6_v2/omgsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6_v2/asmsw_data.nc</dataSource>
      </dataFile>
        <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
      <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6_v2/extlw_data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/Volcano_Solar_1850_cmip6_v2/lean_solar_spectral_data.dat</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="emissions_cmip6_v20161213">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/cmip6/datasets/CM4/forcings/emissions_cmip6_v20161213/litechem_emission.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1849_2016.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Vaishali.Naik/input/cmip6_forcing_dataset/emissions/v2016-12-13/fast_chemistry/emissions.simple.so2.0.5x0.5.1849-2016.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/co2_data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/cmip6/datasets/CM4/forcings/CO2/co2_historical_3D_0to2016.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="emissions_cmip6_v20170518">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/emissions_cmip6_v20170518/emissions.fastchem.0.5x0.5.1849-2017.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/anthro_so2.1849-2017.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/emissions_cmip6_v20170518/emissions.simple.so2.0.5x0.5.1849-2017.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/co2_data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/awg/input/cmip6/co2_data_2016.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="L32_gas_conc">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/L32_gas_conc/gas_conc_3D32L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="L48_gas_conc">
    <input>
      <dataFile label="input" target="INPUT/gas_conc_3D_am3p9.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/L48_gas_conc/gas_conc_3D48L_am3p9.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="amip_sst_cmip6">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/PCMDI_sst/CMIP6_PCMDI.186901-201612.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="climo_sst_cmip6">
    <input>
      <dataFile label="input" target="INPUT/hadisst_sst.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/PCMDI_sst/sst.climo.1981-2014.data.nc</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/hadisst_ice.data.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/PCMDI_sst/ice.climo.1981-2014.data.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="amip_sst_cmip6_v6p1">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/forcings/AMIP_SST_cmip6_v6p1/CMIP6_PCMDI.186901-201712.v6p1.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96_grid">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/c96_grid/c96_OM4_025_grid_No_mg_drag_v20160808.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/land_domain.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/c96_grid/land_domain.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96_grid_only">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(CMIP6_ARCHIVE_ROOT)/CM4/common/c96_grid/c96_OM4_025_grid_No_mg_drag_v20160808.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96_stack_size">
    <input>
      <csh><![CDATA[
set domains_stack_size = "2097152"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>
    </input>
  </freInclude>

  <freInclude name="c192_LM4">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/INPUT/static_veg/19810101.static_veg_LM3p2sosn_HWSD5min_C192_OM4_025.v20160304.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/archive/mdt/awg/input/lm3/c192_OM4_025_hydrography_v20170413.tar </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/INPUT/drag/c192_topo_rough_land.nc.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c192_grid">
    <input>
      <dataFile label="gridSpec" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(H1G_ARCHIVE_ROOT)/awg/input/grid/c192_OM4_025_grid_No_mg_drag_v20160808.tar</dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/land_domain.nc" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_F/Thomas.Robinson/land/c192/land_domain.nc</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c192_stack_size">
    <input>
      <csh><![CDATA[
set domains_stack_size = "3097152"
set do_ocean = "false"

# Copy AWG ascii input files to GFDL (waiting for FRE to do this for us)
if ( $?batch && ! $?FRE_STAGE ) then
  if ( $?flagOutputXferOn && $?flagOutputPostProcessOn ) then
    gcp --batch -cd -r --sync $(AWG_INPUT_HOME) gfdl:$(AWG_INPUT_HOME_GFDL)/..
  endif
endif
      ]]></csh>
    </input>
  </freInclude>

  <freInclude name="csh_adjust_dry_mass">
    <input>
      <csh type="always"><![CDATA[
pushd INPUT
#cd INPUT

# adjustment of dry mass first time only
set adjust_dry_mass = `$(AWG_INPUT_HOME)/adjust_dry_mass.csh`

# create dummy MOM6 parameter file
touch MOM_input
popd
      ]]></csh>
    </input>
  </freInclude>


  <freInclude name="field_table_am4p11">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p11</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <!-- yi-hsuan add field_table_am4p11_tke -->
  <freInclude name="field_table_am4p11_tke">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p11_tke</dataSource>
      </dataFile>
    </input>
  </freInclude>

<!--
  field_table with parameters for CMIP6 diagnostic output
-->
  <freInclude name="field_table_am4p11_cmip6">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p11_cmip6</dataSource>
      </dataFile>
    </input>
  </freInclude>

 
  <freInclude name="field_table_am4p11_fullchem">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p11_fullchem</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="field_table_am4p11_fullchem_2010">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p11_fullchem_2010</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="field_table_am4p11_fullchem_1850">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_am4p11_fullchem_1850</dataSource>
      </dataFile>
    </input>
  </freInclude>



  <freInclude name="diag_table_lm3p2_fullaero">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
       <dataSource platform="$(platform)">$(SCM_INCLUDE)/diag_table/diag_table_scm_mf</dataSource>  <!-- yi-hsuan set scm_mf diag_table -->
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land_old</dataSource>
      </dataFile>
    </input>
  </freInclude>


<!--
  diag_table for CMIP6 diagnostic output
-->
  <freInclude name="diag_table_lm3p2_fullaero_cmip6">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_cmip6</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_simpleSO4</dataSource>
      </dataFile>

<!--
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_3hr</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_6hrLev</dataSource>
      </dataFile>
-->

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_6hrPlevPt</dataSource>
      </dataFile>

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_AERmon_simple</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_Amon</dataSource>
      </dataFile>

<!-- CF3hr, no need for piControl, historical, 1%CO2, 4XCO2 CFmip
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_CF3hr</dataSource>
      </dataFile>
-->
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_CFday</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_CFmon</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_E1hrClimMon</dataSource>
      </dataFile>

<!-- E3hrPt, no need for piControl, historical, 1%CO2, 4XCO2 CFmip
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_E3hrPt</dataSource>
      </dataFile>
-->

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_Eday</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_Emon</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_LImon</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_Lmon</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_day</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_fx</dataSource>
      </dataFile>

<!-- CFsite, no need to piControl  
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_CFsite</dataSource>
      </dataFile>
-->

      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/cmip6/diag_table_global_avg</dataSource>
      </dataFile>

<!-- remove mcu, GFDL AM4/CM4 only provides net upward mass fluxes "mc". There are no upward mass fluxes  
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_CFmon_aug30</dataSource>
      </dataFile>
-->
    </input>
  </freInclude>


  <freInclude name="diag_table_lm3p2_fullchem">
    <input>
      <diagTable>
$name
$baseDate

      </diagTable>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_atmos_fullchemOnly_v20140325</dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
         <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/diag_table/diag_table_land</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="data_table_AM4">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_amip</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="data_table_co2">
    <input>
      <dataFile label="dataTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/data_table/data_table_co2</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96L32_initCond_Newtopo">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/INPUT/InitCond/AWG_c96L32/topo_v20161229/awg_C96L32_LM3_OM4_025_grid_lm4p1_topo_v20161229.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96L33_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_W/Ming.Zhao/archive/mdt/awg/input/ic/AM4/awg_C96L33_LM3_OM4_025_grid_lm4p1_topo_v20170309.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <freInclude name="c96L48_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/INPUT/InitCond/AWG_c96L48/awg_C96L48_LM3_OM4_025_grid_lm4p1_topo_v20160210.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="c192L32_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/INPUT/InitCond/AWG_c192L32_newLand20160112/awg_C192L32_OM4_025_grid_lm4p1_v20161202.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>


  <freInclude name="c192L33_initCond">
    <input>
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">/lustre/f2/pdata/gfdl/gfdl_M/Huan.Guo/INPUT/InitCond/AWG_c192L32_newLand20160112/awg_C192L32_OM4_025_grid_lm4p1_v20170325.tar</dataSource>
      </dataFile>
    </input>
  </freInclude>



<!--================================-->
<!--= LAYOUTS FOR C96 EXPERIMENTS  =-->
<!--================================-->

<freInclude name="c96_864_production_clubb">
        <resources jobWallclock="16:00:00"
                   segRuntime="1:00:00" >
                <atm ranks="864" threads="1"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,6"   io_layout = "1,3" />
                <ice                            layout = "144,6"   io_layout = "1,3" />
        </resources>
</freInclude>

<freInclude name="c96_864_production">
        <resources jobWallclock="16:00:00"
                   segRuntime="1:50:00" >
               <atm ranks="432" threads="2"    layout = "3,24"    io_layout = "1,4" />
               <lnd                            layout = "3,24"    io_layout = "1,4" />
               <ocn ranks="0"   threads="0"    layout = "144,3"   io_layout = "1,3" /> 
               <ice                            layout = "144,3"   io_layout = "1,3" />
        </resources>
</freInclude>

<freInclude name="c96_1152_production">
        <resources jobWallclock="16:00:00"
                   segRuntime="04:00:00" >
                <atm ranks="576" threads="2"    layout = "4,24"    io_layout = "1,4" />
                <lnd                            layout = "4,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,4"   io_layout = "1,4" /> 
                <ice                            layout = "144,4"   io_layout = "1,4" />
        </resources>
</freInclude>

<freInclude name="c96_1728_production">
        <resources jobWallclock="16:00:00"
                   segRuntime="03:00:00" >
                <atm ranks="864" threads="2"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
        </resources>
</freInclude>

<freInclude name="c96_216_basic">
        <run days="8">
                <resources jobWallclock="02:30:00">
                <atm ranks="216" threads="1"    layout = "3,12"    io_layout = "1,4" />
                <lnd                            layout = "3,12"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "72,3"    io_layout = "1,3" />
                <ice                            layout = "72,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude>


<freInclude name="c96_216_rts">
        <run days="8">
                <resources jobWallclock="00:40:00">
                <atm ranks="216" threads="1"    layout = "3,12"    io_layout = "1,4" />
                <lnd                            layout = "3,12"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "72,3"    io_layout = "1,3" />
                <ice                            layout = "72,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_384_rts">
        <run days="4 4">
                <resources jobWallclock="00:40:00">
                <atm ranks="192" threads="2"    layout = "4,8"     io_layout = "1,4" />
                <lnd                            layout = "4,8"     io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "64,3"    io_layout = "1,3" /> 
                <ice                            layout = "64,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude>

<freInclude name="c96_432_debug">
        <run days="2">
                <resources jobWallclock="02:00:00">
                <atm ranks="432" threads="1"    layout = "3,24"    io_layout = "1,4" />
                <lnd                            layout = "3,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,3"   io_layout = "1,3" /> 
                <ice                            layout = "144,3"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>

<freInclude name="c96_216_debugrts">
        <run days="2">
                <resources jobWallclock="02:00:00">
                <atm ranks="216" threads="1"    layout = "3,12"    io_layout = "1,4" />
                <lnd                            layout = "3,12"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "72,3"    io_layout = "1,3" />
                <ice                            layout = "72,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_384_debugrts">
        <run days="1 1">
                <resources jobWallclock="02:00:00">
                <atm ranks="192" threads="2"    layout = "4,8"     io_layout = "1,4" />
                <lnd                            layout = "4,8"     io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "64,3"    io_layout = "1,3" /> 
                <ice                            layout = "64,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude>

<freInclude name="c96_864_restart">
        <run days="4 4">
                <resources jobWallclock="00:45:00">
                <atm ranks="432" threads="2"    layout = "3,24"    io_layout = "1,4" />
                <lnd                            layout = "3,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,3"   io_layout = "1,3" /> 
                <ice                            layout = "144,3"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>

<freInclude name="c96_1152_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="576" threads="2"    layout = "4,24"    io_layout = "1,4" />
                <lnd                            layout = "4,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,4"   io_layout = "1,4" /> 
                <ice                            layout = "144,4"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_1728_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="864" threads="2"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_2304_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="2"   layout = "12,16"   io_layout = "1,4" />
                <lnd                            layout = "12,16"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_3456_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="1728" threads="2"   layout = "12,24"   io_layout = "1,4" />
                <lnd                            layout = "12,24"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,12"  io_layout = "1,4" /> 
                <ice                            layout = "144,12"  io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_4608_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="4"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "96,12"   io_layout = "1,4" /> 
                <ice                            layout = "96,12"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_6912_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="3456" threads="2"   layout = "24,24"   io_layout = "1,4" />
                <lnd                            layout = "24,24"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,24"  io_layout = "1,4" /> 
                <ice                            layout = "144,24"  io_layout = "1,4" />
                </resources>
        </run>
</freInclude>

<freInclude name="c96_216_timing">
        <run months="1">
                <resources jobWallclock="02:00:00">
                <atm ranks="216" threads="1"    layout = "3,12"    io_layout = "1,4" />
                <lnd                            layout = "3,12"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "72,3"    io_layout = "1,3" />
                <ice                            layout = "72,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_384_timing">
        <run months="1">
                <resources jobWallclock="02:00:00">
                <atm ranks="192" threads="2"    layout = "4,8"     io_layout = "1,4" />
                <lnd                            layout = "4,8"     io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "64,3"    io_layout = "1,3" /> 
                <ice                            layout = "64,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude> 
<freInclude name="c96_432_timing">
       <run months="1">
                <resources jobWallclock="02:00:00">
                <atm ranks="432" threads="1"    layout = "3,24"    io_layout = "1,4" />
                <lnd                            layout = "3,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,3"   io_layout = "1,3" />
                <ice                            layout = "144,3"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_864_timing">
        <run months="1">
                <resources jobWallclock="01:00:00">
                <atm ranks="432" threads="2"    layout = "3,24"    io_layout = "1,4" />
                <lnd                            layout = "3,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,3"   io_layout = "1,3" />
                <ice                            layout = "144,3"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_1152_timing">
        <run months="1">
                <resources jobWallclock="00:45:00">
                <atm ranks="576" threads="2"    layout = "4,24"    io_layout = "1,4" />
                <lnd                            layout = "4,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,4"   io_layout = "1,4" /> 
                <ice                            layout = "144,4"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_1728_timing">
        <run months="1">
                <resources jobWallclock="00:34:00">
                <atm ranks="864" threads="2"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_2304_timing">
        <run months="1">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="2"   layout = "12,16"   io_layout = "1,4" />
                <lnd                            layout = "12,16"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_3456_timing">
        <run months="1">
                <resources jobWallclock="00:30:00">
                <atm ranks="1728" threads="2"   layout = "12,24"   io_layout = "1,4" />
                <lnd                            layout = "12,24"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,12"  io_layout = "1,4" /> 
                <ice                            layout = "144,12"  io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_4608_timing">
        <run months="1">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="4"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "96,12"   io_layout = "1,4" /> 
                <ice                            layout = "96,12"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c96_6912_timing">
        <run months="1">
                <resources jobWallclock="00:30:00">
                <atm ranks="3456" threads="2"   layout = "24,24"   io_layout = "1,4" />
                <lnd                            layout = "24,24"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,24"  io_layout = "1,4" /> 
                <ice                            layout = "144,24"  io_layout = "1,4" />
                </resources>
        </run>
</freInclude>

<!--================================-->
<!--= LAYOUTS FOR C192 EXPERIMENTS =-->
<!--================================-->
<freInclude name="c192_2304_production">
        <resources jobWallclock="16:00:00"
                   segRuntime="2:50:00" >
                <atm ranks="1152" threads="2"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
    </resources>
</freInclude>

<freInclude name="c192_864_basic">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="864" threads="1"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>

<freInclude name="c192_1152_debug">
        <run days="2">
                <resources jobWallclock="03:00:00">
                <atm ranks="1152" threads="1"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>

<freInclude name="c192_864_restart">
        <run days="4 4">
                <resources jobWallclock="00:30:00">
                <atm ranks="864" threads="1"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>

<freInclude name="c192_1152_restart">
        <run days="4 4">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="1"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>

<freInclude name="c192_384_scaling">
        <run days="8">
                <resources jobWallclock="01:00:00">
                <atm ranks="192" threads="2"    layout = "4,8"     io_layout = "1,4" />
                <lnd                            layout = "4,8"     io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "64,3"    io_layout = "1,3" /> 
                <ice                            layout = "64,3"    io_layout = "1,3" />
                </resources>
        </run> 
</freInclude>
<freInclude name="c192_2304_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="2"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_3456_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="864" threads="4"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_4608_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="4"   layout = "12,16"   io_layout = "1,4" />
                <lnd                            layout = "12,16"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_6912_scaling">
        <run days="8">
                <resources jobWallclock="00:30:00">
                <atm ranks="864" threads="8"    layout = "12,12"   io_layout = "1,4" />
                <lnd                            layout = "12,12"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>


<freInclude name="c192_384_timing">
        <run months="1">
                <resources jobWallclock="03:00:00">
                <atm ranks="192" threads="2"    layout = "4,8"     io_layout = "1,4" />
                <lnd                            layout = "4,8"     io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "64,3"    io_layout = "1,3" /> 
                <ice                            layout = "64,3"    io_layout = "1,3" />
                </resources>
        </run>
</freInclude> 

<freInclude name="c192_864_timing">
        <run months="1">
                <resources jobWallclock="02:00:00">
                <atm ranks="864" threads="1"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_1152_timing">
        <run months="1">
                <resources jobWallclock="01:45:00">
                <atm ranks="1152" threads="1"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_2304_timing">
        <run months="1">
                <resources jobWallclock="00:45:00">
                <atm ranks="1152" threads="2"   layout = "8,24"    io_layout = "1,4" />
                <lnd                            layout = "8,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_3456_timing">
        <run months="1">
                <resources jobWallclock="00:45:00">
                <atm ranks="864" threads="4"    layout = "6,24"    io_layout = "1,4" />
                <lnd                            layout = "6,24"    io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_4608_timing">
        <run months="1">
                <resources jobWallclock="00:30:00">
                <atm ranks="1152" threads="4"   layout = "12,16"   io_layout = "1,4" />
                <lnd                            layout = "12,16"   io_layout = "1,4" />
                <ocn ranks="0"    threads="0"   layout = "144,8"   io_layout = "1,4" /> 
                <ice                            layout = "144,8"   io_layout = "1,4" />
                </resources>
        </run>
</freInclude>
<freInclude name="c192_6912_timing">
        <run months="1">
                <resources jobWallclock="00:30:00">
                <atm ranks="864" threads="8"    layout = "12,12"   io_layout = "1,4" />
                <lnd                            layout = "12,12"   io_layout = "1,4" />
                <ocn ranks="0"   threads="0"    layout = "144,6"   io_layout = "1,3" /> 
                <ice                            layout = "144,6"   io_layout = "1,3" />
                </resources>
        </run>
</freInclude>


<!--================================-->
<!--= TEMPLATES FOR POSTPROCESSING =-->
<!--================================-->

  <freInclude name="c96_amip_postprocess">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

<!-- RIVER -->
      <component type="river" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="river_cubic" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/riverMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/riverDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="river_instant_cubic" start="$(ANA_AMIP_START)" source="river_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </freInclude>

  <freInclude name="c96_climo_postprocess">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

<!-- RIVER -->
      <component type="river" start="$(ANA_CLIMO_START)" source="river_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="river_cubic" start="$(ANA_CLIMO_START)" source="river_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/riverMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/riverDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="river_instant_cubic" start="$(ANA_CLIMO_START)" source="river_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </freInclude>


<!--
  postprocessing for CMIP6 diagnostic output
-->
  <freInclude name="c96_amip_postprocess_cmip6">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_atmos_cmip6.csh"/>

      <component type="atmos_cmip" start="$(ANA_AMIP_START)" source="atmos_month_cmip" sourceGrid="atmos-cubedsphere" xyInterp="180,288" cmip="on">
       <!--
        <timeSeries freq="3hr" source="atmos_8xdaily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmos8xDailyTScmip/*)"/>
        </timeSeries>
        <timeSeries freq="3hr" source="atmos_8xdaily_inst" chunkLength="$(PP_AMIP_CHUNK)"/>
       -->

            <!-- 6hrLevPt, no data at 3 pressure levels Plev3 => no need atmos_4xdaily_cmip refineDiag -->
        <timeSeries freq="6hr" source="atmos_4xdaily_refined" chunkLength="$(PP_AMIP_CHUNK)">
          <variables>
             ta ua va rv850
          </variables>
        </timeSeries>

        <timeSeries freq="6hr" source="atmos_4xdaily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <variables>
             rv850_unmsk psl zg500
          </variables>
        </timeSeries>

        <timeSeries freq="daily" source="atmos_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <variables> 
             huss tasmin tasmax tas pr psl sfcWind hurs hursmin hursmax clt tslsi prc prsn uas vas sfcWindmax hfls hfss rlds rlus rsds rsus rlut  
          </variables>
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosDailyTScmip/*)"/>
        </timeSeries>

        <timeSeries freq="monthly" source="atmos_month_refined" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthTScmip/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthAVcmip/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="atmos_cmip_2deg_daily_2D" start="$(ANA_AMIP_START)" source="atmos_daily_cmip" sourceGrid="atmos-cubedsphere" xyInterp="90,144" cmip="on">
        <timeSeries freq="daily" source="atmos_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <variables>
                 <!-- diag_table_day, 2D field at both 2-deg and 1-deg resolution-->
             huss tasmin tasmax tas pr psl sfcWind hurs hursmin hursmax clt tslsi prc prsn uas vas sfcWindmax hfls hfss rlds rlus rsds rsus rlut 
                 <!-- diag_table_CFday,  2D outputs at 2-deg resolution -->
             ps rsdt rsut rsdscs rsuscs rldscs rlutcs rsutcs clwvi clivi wap500 ta700_unmsk ccb cct 
                     <!-- cltisccp albisccp pctisccp cltcalipso cllcalipso clmcalipso clhcalipso -->
                 <!-- diag_table_Eday,  2D outputs at 2-deg resolution -->
             rsdsdiff rsdscsdiff cldnvi ts prw
          </variables>
        </timeSeries>

        <timeSeries freq="daily" source="atmos_daily_refined" chunkLength="$(PP_AMIP_CHUNK)">
          <variables>
                 <!-- diag_table_CFday,  2D outputs at 2-deg resolution -->
             ta700 
          </variables>
        </timeSeries>
      </component>

      <component type="atmos_cmip_2deg_daily_3D" start="$(ANA_AMIP_START)" source="atmos_daily_cmip" sourceGrid="atmos-cubedsphere" xyInterp="90,144" cmip="on">
            <!-- diag_table_day, at plev19 -->
        <timeSeries freq="daily" source="atmos_daily_refined" chunkLength="$(PP_AMIP_CHUNK)">
          <variables>
             hur hus ta ua va wap albs
          </variables>
          <xi:include href="./awg_include/analysis/analysis_cpld.xml" xpointer="xpointer(*/atmosDaily3DTScmip/*)">
            <xi:fallback/>
          </xi:include>
        </timeSeries>
      </component>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288" cmip="off">
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthAV/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosAnnualAV/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level_cmip" start="$(ANA_AMIP_START)" source="atmos_level_cmip" sourceGrid="atmos-cubedsphere" xyInterp="180,288" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- 6hrLev (model level) not requested for piControl
      <component type="atmos_level_cmip_2deg_6hr" start="$(ANA_AMIP_START)" source="atmos_level_cmip" sourceGrid="atmos-cubedsphere" xyInterp="90,144" cmip="on">
             6hrLev, at native model vertical levels (i.e., 33 levels) 
        <timeSeries freq="6hr" source="atmos_4xdaily_inst" chunkLength="$(PP_AMIP_CHUNK)"/>            
      </component>
-->

      <component type="atmos_level_cmip_2deg_daily" start="$(ANA_AMIP_START)" source="atmos_level_cmip" sourceGrid="atmos-cubedsphere" xyInterp="90,144" cmip="on">
            <!-- diag_table_CFday,  3D native model vertical level (33 levels) outputs -->
        <timeSeries freq="daily" source="atmos_level_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <variables> 
             ua va ta hus wap zg hur cl clw cli mc
          </variables>
        </timeSeries>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="180,288" cmip="off">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosLevelMonthAV/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1"  cmip="on">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthAerAV/*)"/>
        </timeAverage>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="atmos_diurnal_cmip" start="$(ANA_AMIP_START)"  source="atmos_diurnal_cmip" sourceGrid="atmos-cubedsphere" xyInterp="180,288" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="180,288">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" source="atmos_global_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/tracerMonthAV/*)"/>
        </timeAverage>
      </component>

      <component type="aerosol_cmip" start="$(ANA_AMIP_START)" source="aerosol_month_cmip" sourceGrid="atmos-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" source="aerosol_month_refined"/>
      </component>

      <component type="aerosol_cmip_2deg" start="$(ANA_AMIP_START)" source="aerosol_daily_cmip" sourceGrid="atmos-cubedsphere" xyInterp="90,144" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="daily" source="aerosol_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="off">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/landMonthAV/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" cmip="off"> 
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" sourceGrid="land-cubedsphere" cmip="off"> 
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

      <component type="land_cmip" start="$(ANA_AMIP_START)" source="land_month_cmip" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="daily" source="land_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_cmip_2deg" start="$(ANA_AMIP_START)" source="land_month_cmip" sourceGrid="land-cubedsphere" xyInterp="90,144" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="daily" source="land_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- RIVER -->
      <component type="river" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="river_cubic" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere" cmip="off">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/riverMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/riverDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="river_instant_cubic" start="$(ANA_AMIP_START)" source="river_month_inst" sourceGrid="land-cubedsphere" cmip="off">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

<!--
      <component type="land_month_past" start="$(ANA_AMIP_START)" source="land_month_past" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="land_month_inst_past" start="$(ANA_AMIP_START)" source="land_month_inst_past" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_month_crop" start="$(ANA_AMIP_START)" source="land_month_crop" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="land_month_inst_crop" start="$(ANA_AMIP_START)" source="land_month_inst_crop" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_month_ntrl" start="$(ANA_AMIP_START)" source="land_month_ntrl" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="land_month_inst_ntrl" start="$(ANA_AMIP_START)" source="land_month_inst_ntrl" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_month_scnd" start="$(ANA_AMIP_START)" source="land_month_scnd" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="land_month_inst_scnd" start="$(ANA_AMIP_START)" source="land_month_inst_scnd" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="LUmip_month_psl" start="$(ANA_AMIP_START)" source="lumip_Lmon_psl" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="LUmip_month_crp" start="$(ANA_AMIP_START)" source="lumip_Lmon_crp" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="LUmip_month_pst" start="$(ANA_AMIP_START)" source="lumip_Lmon_pst" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="LUmip_year_psl" start="$(ANA_AMIP_START)" source="lumip_Lyr_psl" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" source="lumip_Lyr"  chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="LUmip_year_crp" start="$(ANA_AMIP_START)" source="lumip_Lyr_crp" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
      <component type="LUmip_year_pst" start="$(ANA_AMIP_START)" source="lumip_Lyr_pst" sourceGrid="land-cubedsphere" xyInterp="180,288" interpMethod="conserve_order1" cmip="on">
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>
-->

    </postProcess>
  </freInclude>


  <freInclude name="c192_amip_postprocess">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

<!-- RIVER -->
      <component type="river" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="river_cubic" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/riverMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip.xml" xpointer="xpointer(*/riverDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="river_instant_cubic" start="$(ANA_AMIP_START)" source="river_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

    </postProcess>
  </freInclude>

  <freInclude name="c192_climo_postprocess">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <component type="atmos" zInterp="era40" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="3hr" source="atmos_8xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos8xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAve/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_CLIMO_CHUNK)" calcInterval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosAnnualAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_CLIMO_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosLevelMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_CLIMO_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/atmosMonthAerAve/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_CLIMO_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_CLIMO_START)" source="atmos_scalar">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_CLIMO_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/tracerMonthAve/*)"/>
        </timeAverage>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthAve/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_CLIMO_START)" source="land_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
      </component>

      <component type="land_instant_cubic" start="$(ANA_CLIMO_START)" source="land_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

<!-- RIVER -->
      <component type="river" start="$(ANA_CLIMO_START)" source="river_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_CLIMO_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_CLIMO_LEN)"/>
      </component>

      <component type="river_cubic" start="$(ANA_CLIMO_START)" source="river_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/riverMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_CLIMO_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_climo.xml" xpointer="xpointer(*/riverDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="river_instant_cubic" start="$(ANA_CLIMO_START)" source="river_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_CLIMO_CHUNK)" />
      </component>

    </postProcess>
  </freInclude>





<!--
  postprocessing for CMIP6 diagnostic output
-->
  <freInclude name="c192_amip_postprocess_cmip6">
    <postProcess>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_data_stager_globalAve.csh"/>
      <refineDiag script="$(AWG_INPUT_HOME_GFDL)/refineDiag/refineDiag_atmos_cmip6.csh"/>

      <component type="atmos_cmip" start="$(ANA_AMIP_START)" source="atmos_month_cmip" sourceGrid="atmos-cubedsphere" xyInterp="360,576" cmip="yes">
        <timeSeries freq="3hr" source="atmos_8xdaily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmos8xDailyTScmip/*)"/>
        </timeSeries>
        <timeSeries freq="3hr" source="atmos_8xdaily_inst" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="6hr" source="atmos_4xdaily_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="daily" source="atmos_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosDailyTScmip/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="atmos_daily_refined" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthTScmip/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" source="atmos_month_refined" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthAVcmip/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="atmos" zInterp="era40" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="6hr" source="atmos_4xdaily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmos4xDailyTS/*)"/>
        </timeSeries>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthAV/*)"/>
        </timeAverage>
        <timeAverage source="annual" interval="$(PP_AMIP_CHUNK)" calcInterval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="annual" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosAnnualAV/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_level" start="$(ANA_AMIP_START)" source="atmos_month" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosLevelAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosLevelMonthAV/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_month_aer" start="$(ANA_AMIP_START)" source="atmos_month_aer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/atmosMonthAerAV/*)"/>
        </timeAverage>
      </component>

      <component type="atmos_diurnal" start="$(ANA_AMIP_START)" source="atmos_diurnal" sourceGrid="atmos-cubedsphere" xyInterp="360,576">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="atmos_scalar" start="$(ANA_AMIP_START)" source="atmos_scalar" cmip="yes">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- FULL CHEMISTRY -->
      <component type="tracer_level" start="$(ANA_AMIP_START)" source="atmos_tracer" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/tracerAnnualTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/tracerMonthAV/*)"/>
        </timeAverage>
      </component>

      <component type="aerosol_cmip" start="$(ANA_AMIP_START)" source="aerosol_month_cmip" sourceGrid="atmos-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1" cmip="yes">
        <timeSeries freq="daily" source="aerosol_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" source="aerosol_month_refined"/>
        <timeSeries freq="annual" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- LAND -->
      <component type="land" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/landMonthTS/*)"/>
        </timeSeries>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/landMonthAV/*)"/>
        </timeAverage>
      </component>

      <component type="land_cubic" start="$(ANA_AMIP_START)" source="land_month" sourceGrid="land-cubedsphere"> 
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" >
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/landMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="land_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
      </component>

      <component type="land_instant_cubic" start="$(ANA_AMIP_START)" source="land_month_inst" sourceGrid="land-cubedsphere"> 
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>

      <component type="land_cmip" start="$(ANA_AMIP_START)" source="land_month_cmip" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1" cmip="yes">
        <timeSeries freq="daily" source="land_daily_cmip" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
      </component>

<!-- RIVER -->
      <component type="river" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere" xyInterp="360,576" interpMethod="conserve_order1">
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(PP_AMIP_CHUNK)"/>
        <timeAverage source="monthly" interval="$(ANA_AMIP_LEN)"/>
      </component>

      <component type="river_cubic" start="$(ANA_AMIP_START)" source="river_month" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/riverMonthTSNative/*)"/>
        </timeSeries>
        <timeSeries freq="daily" source="river_daily" chunkLength="$(PP_AMIP_CHUNK)">
          <xi:include href="awg_include/analysis/analysis_amip_cmip.xml" xpointer="xpointer(*/riverDailyTSNative/*)"/>
        </timeSeries>
      </component>

      <component type="river_instant_cubic" start="$(ANA_AMIP_START)" source="river_month_inst" sourceGrid="land-cubedsphere">
        <timeSeries freq="monthly" chunkLength="$(PP_AMIP_CHUNK)" />
      </component>
    </postProcess>
  </freInclude>


<!--====================-->
<!--= AMIP EXPERIMENTS =-->
<!--====================-->
  <experiment name="c96L33_am4p0" inherit="cm4p0_$(AWG_VERSION)">
<!-- MDBI -->
    <publicMetadata DBswitch="$(MDBIswitch)">
      <realization r="1" i="1" p="1"/>
      <project>$(ProjectID)</project>
      <model>am4p0</model>
      <modelID>am4p0</modelID>
      <experimentName>$(name)</experimentName>
      <experimentID>$(name)</experimentID>
      <comment>
Experiment name = $(name)
      </comment>
      <forcing>N/A</forcing>
      <startTime>$(EXP_AMIP_START)</startTime>
      <endTime>$(EXP_AMIP_END)</endTime>
      <parentExperimentID>N/A</parentExperimentID>
      <parentExperimentRIP>N/A</parentExperimentRIP>
      <branchTime>0.0</branchTime>
    </publicMetadata>
<!-- /MDBI -->
<description>
</description>
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = $atm_threads
      </namelist>
      <!-- Namelist -->
      <namelist file="$(AWG_INPUT_HOME)/nml/ocean_g12.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p0_common.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p0_physics.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p0_c96L33.nml"/>
      <namelist file="$(AWG_INPUT_HOME)/nml/am4p0_amip.nml"/>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        current_date = 1999,1,1,0,0,0,
        calendar = 'julian'
        dt_atmos = 1800,
        dt_cpld  = 7200,
        use_lag_fluxes = .true.
        concurrent = .false.
        do_ocean = .false.
        ocean_npes = $ocn_ranks
        atmos_npes = $atm_ranks
        atmos_nthreads = $atm_threads
        use_hyper_thread = $ht
        ncores_per_node = $(NCORE_PER_NODE)
      </namelist>

      <!-- Input datasets -->
      <xi:include xpointer="xpointer(//freInclude[@name='common_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='common_AM4_v20170208']/input/node())"/>

      <xi:include xpointer="xpointer(//freInclude[@name='common_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='Volcano_Solar_TimeSeries_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='emissions_cmip6_v20161213']/input/node())"/>

      <xi:include xpointer="xpointer(//freInclude[@name='L32_gas_conc']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='amip_sst_cmip6']/input/node())"/>

      <xi:include xpointer="xpointer(//freInclude[@name='data_table_AM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_co2']/input/node())"/>

      <xi:include xpointer="xpointer(//freInclude[@name='c96_grid']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_stack_size']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='csh_adjust_dry_mass']/input/node())"/>

      <xi:include xpointer="xpointer(//freInclude[@name='c96L33_initCond']/input/node())"/>

      <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4p11']/input/node())"/>

    </input>

    <runtime>
      <production simTime="$(EXP_AMIP_LEN)" units="years" >
          <segment simTime="12" units="months" />
          <xi:include xpointer="xpointer(//freInclude[@name='c96_864_production']/node())"/>
      </production>
      <regression name="debug">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_432_debug']/node())"/>
      </regression>
      <regression name="basic">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_216_basic']/node())"/>
      </regression>
      <regression name="rts">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_216_rts']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_384_rts']/node())"/>
      </regression>
      <regression name="debugrts">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_216_debugrts']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_384_debugrts']/node())"/>
      </regression>
      <regression name="restart">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_864_restart']/node())"/>
      </regression>
      <regression name="scaling">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_1152_scaling']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_1728_scaling']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_2304_scaling']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_3456_scaling']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_4608_scaling']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_6912_scaling']/node())"/>
      </regression>
      <regression name="timing">
          <xi:include xpointer="xpointer(//freInclude[@name='c96_216_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_384_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_432_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_864_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_1152_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_1728_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_2304_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_3456_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_4608_timing']/node())"/>
          <xi:include xpointer="xpointer(//freInclude[@name='c96_6912_timing']/node())"/>
      </regression>

    </runtime>

    <postProcess>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_amip_postprocess']/postProcess/node())"/>
    </postProcess>
  </experiment>




<!--
===================================================================================

Single Column Model experiments follow.

See the documentation on how to run these experiments.

Reference: https://www.w3.org/TR/xinclude/

===================================================================================
-->

<!--============================================-->
<!--= specify SCM global model (uncomment one) =-->
<!--============================================-->
  <property name="AWG_EXPERIMENT" value="c96L33_am4p0" />
  <property name="NMODEL_LEVELS"  value="33" />

  <property name="DO_MG_DRAG" value=".true." />
  <property name="DO_TOPO_ROUGH" value=".false." />
  <property name="TOPO_ROUGH_FILE" value="mg_drag.res.nc" />

<!-- Note: found that TOPO_ROUGH_FILE = topo_rough_land.nc did not work for SCM g11r11 AMIP experiments in awg_v20160914_withSCM.xml -->
<!--
  <property name="DO_MG_DRAG" value=".false." />
  <property name="DO_TOPO_ROUGH" value=".true." />
  <property name="TOPO_ROUGH_FILE" value="topo_rough_land.nc" />
-->

<!--=====================-->
<!--= COMPILE SCM model =-->
<!--=====================-->


  <experiment name="$(SCM_COMP_EXP)">
    <description>
      Single Column Model base code
    </description>
    <component name="fms" paths="FMS">
     <description domainName="infrastructure" communityName="FMS" communityVersion="$(RELEASE)" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="$(SCM_GIT_TAG)"> FMS.git </codeBase>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_libMPI -Duse_netCDF</cppDefs>
      </compile>
    </component>

<!--
Typically the XML has libraries for the various components of the model. The SCM needs to be different in this respect.
Due to various dependencies, the libraries for the coupler, atmos_param and forcing/dynamical core need to be combined.

The reasons for this are
1) The various SCM experiments (in atmos_scm/forc) use vert_advection which is in the physics library.
So atmos_scm needs to be compiled with atmos_param.

2) The various SCM experiments also use surface_data ( in coupler/surface_flux.F90).
So atmos_scm (and atmos_phys and atmos_dyn) need to be compiled with coupler.

-->

<!-- SCM with FV-latlon tools/grid -->
    <component name="mom6" requires="fms" paths="mom6/src/MOM6/config_src/dynamic mom6/src/MOM6/config_src/coupled_driver mom6/src/MOM6/src/*/ mom6/src/MOM6/src/*/*/ ocean_shared/generic_tracers ocean_shared/mocsy/src">
      <description domainName="Ocean" communityName="GFDL-MOM6" communityVersion="$(MOM6_GIT_TAG)" communityGrid="Tripolar"/>
       <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master"> ocean_shared.git </codeBase>
        <csh><![CDATA[
          git clone -b $(MOM6_GIT_TAG) https://github.com/NOAA-GFDL/MOM6-examples.git mom6
          pushd mom6
          git checkout $(MOM6_GIT_TAG)  #needed for older git on zeus
          git submodule init src/MOM6 src/SIS2 src/icebergs tools/python/MIDAS
          git clone --recursive https://github.com/NOAA-GFDL/MOM6.git src/MOM6 
          git clone             https://github.com/NOAA-GFDL/SIS2.git src/SIS2
          git clone             https://github.com/NOAA-GFDL/icebergs.git src/icebergs
          git submodule update #This gets the right version of submodules
          popd

          pushd mom6
          set platform_domain = `perl -T -e "use Net::Domain(hostdomain) ; print hostdomain"`
          if ("${platform_domain}" =~ *"fairmont.rdhpcs.noaa.gov"* ) then
            ln -s /scratch4/GFDL/gfdlscr/pdata/gfdl_O/datasets/ .datasets
          else if ("${platform_domain}" =~ *"ccs.ornl.gov"* ) then
            ln -s /lustre/atlas/proj-shared/cli061/pdata/gfdl_O/datasets/ .datasets
          else
            ln -s /lustre/f2/pdata/gfdl/gfdl_O/datasets/ .datasets
          endif
          popd   

          test -e mom6/.datasets
          if ($status != 0) then
            echo ""; echo "" ; echo "   WARNING:  .datasets link in MOM6 examples directory is invalid"; echo ""; echo ""
          endif
 
        ]]></csh>
      </source>
      <compile>
        <cppDefs><![CDATA[ $(F2003_FLAGS) -DMAX_FIELDS_=100 -DNOT_SET_AFFINITY -D_USE_MOM6_DIAG -D_USE_GENERIC_TRACER  -DUSE_PRECISION=2 -D_FILE_VERSION="'"`git-version-string $<`"'" ]]></cppDefs>
        <makeOverrides>OPENMP=""</makeOverrides> <!-- openmp switch for MOM6 may cause crash -->
      </compile>
    </component>

    <component name="ice_sis" requires="fms mom6" paths="ice_sis ice_param">
      <description domainName="Sea Ice SIS" communityName="GFDL-SIS" communityVersion="$(RELEASE)" communityGrid="Tripolar"/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master"> ice_sis.git ice_param.git </codeBase>
        <csh><![CDATA[
          ( cd ice_sis    && git checkout $(AWG_GIT_TAG) )
          ( cd ice_param  && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -Duse_netCDF</cppDefs>
      </compile>
    </component>

    <!--component name="land_lad2" requires="fms" paths="land_lad2">
      <description domainName="LM3" communityName="land_lad2" communityVersion="dev/master" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master">land_lad2.git</codeBase>
        <csh><![CDATA[
          ( cd land_lad2 && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile doF90Cpp="yes">
       <cppDefs>$(F2003_FLAGS) -nostdinc</cppDefs>
      </compile>
    </component-->

    <component name="land_null" requires="fms" paths="land_null">
      <description domainName="LM3" communityName="land_lad2" communityVersion="dev/master" communityGrid=""/>
      <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
        <codeBase version="master">land_null.git</codeBase>
        <csh><![CDATA[
          ( cd land_null && git checkout $(AWG_GIT_TAG) )
         ]]>
        </csh>
      </source>
      <compile doF90Cpp="yes">
       <cppDefs>$(F2003_FLAGS) -nostdinc</cppDefs>
      </compile>
    </component>

    <component name="FMScoupler" requires="fms ice_sis mom6 land_null" paths="FMScoupler
                                                               atmos_drivers/coupled
							       coupler
							       atmos_scm
                                                               atmos_fv_dynamics/model
                                                               atmos_fv_dynamics/tools
                                                               atmos_param
                                                               atmos_shared">
      <description domainName="" communityName="FMScoupler" communityVersion="$(RELEASE)" communityGrid=""/>
        <source versionControl="git" root="http://gitlab.gfdl.noaa.gov/fms">
          <codeBase version="$(SCM_GIT_TAG)">atmos_drivers.git atmos_shared.git atmos_param.git</codeBase>
          <csh><![CDATA[
           git clone --recursive -b $(RELEASE) http://gitlab.gfdl.noaa.gov/fms/shared.git
           git clone --recursive -b $(RELEASE) http://gitlab.gfdl.noaa.gov/fms/coupler.git
           git clone --recursive -b user/miz/scm_xanadu_v20200428 http://gitlab.gfdl.noaa.gov/fms/atmos_fv_dynamics.git
           git clone -q --recursive -b user/miz/scm_xanadu_v20200428 http://gitlab.gfdl.noaa.gov/fms/atmos_scm.git
          ]]>
          </csh>
        </source>
      <compile>
        <cppDefs>$(F2003_FLAGS) -DSCM -DCLUBB -DSPMD -DLAND_BND_TRACERS -D_USE_LEGACY_LAND_</cppDefs>
         <srcList>
          $(SCM_INCLUDE)/code_updates/scm_bomex.F90
          $(SCM_INCLUDE)/code_updates/scm_dcbl.F90
          $(SCM_INCLUDE)/code_updates/scm_forc.F90
          $(SCM_INCLUDE)/code_updates/scm_gcss_arm.F90
          $(SCM_INCLUDE)/code_updates/scm_rf01.F90
          $(SCM_INCLUDE)/code_updates/scm_rico.F90
          $(SCM_INCLUDE)/code_updates/set_eta.F90
        </srcList>
      </compile>
    </component>

  </experiment>

  <property name="FMS_ARCHIVE_ROOT" value="$PDATA/gfdl/fms" />

  <experiment name="navy_data">
    <input>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(FMS_ARCHIVE_ROOT)/module_data/quebec/navy_topography.data.nc
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(FMS_ARCHIVE_ROOT)/module_data/quebec/navy_pctwater.data.nc
        </dataSource>
      </dataFile>
      <!-- Have a blank initial condition file -->
      <dataFile label="initCond" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">''</dataSource>
      </dataFile>
    </input>
  </experiment>

  <experiment name="GATE_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# GATE experiment centered at 23.5W, 8.5N
# set up the grid box bound
  set lon_min =  335.0
  set lon_max =  338.0
  set lat_min =    7.0
  set lat_max =   10.0

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  333.0
  set x_max   =  340.0
  set y_min   =    5.0
  set y_max   =   12.0

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 3.5,3.5 \
-y $y_min,$y_max -dy 3.5,3.5 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
-i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

  <experiment name="MC3E_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# SGP/MC3E site is at 36deg 36min North, 97deg 29minW
# set up the grid box bound
  set lon_min =   260.0
  set lon_max =   265.0
  set lat_min =    35.1
  set lat_max =    38.1

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =   259.0
  set x_max   =   266.0
  set y_min   =    34.0
  set y_max   =    39.0

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 3.5,3.5 \
-y $y_min,$y_max -dy 2.5,2.5 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
-i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

  <experiment name="TWPICE_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# set up the grid box bound
  set lon_min =  129.5
  set lon_max =  132.5
  set lat_min =  -13.5
  set lat_max =  -11.0

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  128.5
  set x_max   =  133.5
  set y_min   =  -14.0
  set y_max   =  -10.0

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 2.5,2.5 \
-y $y_min,$y_max -dy 2.0,2.0 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
-i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

<!-- Additional Experiments: ZNT 20200218 -->
  <experiment name="BOMEX_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# BOMEX experiment centered at 56W, 15N
# set up the grid box bound
  set lon_min =  302.75
  set lon_max =  305.25
  set lat_min =   14.0
  set lat_max =   16.0

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  301.5
  set x_max   =  306.5
  set y_min   =   13.0
  set y_max   =   17.0

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 2.5,2.5 \
-y $y_min,$y_max -dy 2.0,2.0 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
-i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

<!-- Additional Experiments: ZNT 20200414 -->
  <experiment name="DCBL_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# For DCBL case the location is irrelavant, thus following BOMEX for simplicity
# Using BOMEX experiment centered at 56W, 15N
# set up the grid box bound
  set lon_min =  302.75
  set lon_max =  305.25
  set lat_min =   14.0
  set lat_max =   16.0

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  301.5
  set x_max   =  306.5
  set y_min   =   13.0
  set y_max   =   17.0

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 2.5,2.5 \
-y $y_min,$y_max -dy 2.0,2.0 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
-i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

<!-- Additional Experiments: ZNT 20200226 -->
  <experiment name="RF01_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# DYCOMS rf01 experiment centered at 125.5W, 31.5N
# set up the grid box bound
  set lon_min =  236.25
  set lon_max =  238.75
  set lat_min =  30.5
  set lat_max =  32.5

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  235.0
  set x_max   =  240.0
  set y_min   =  29.5
  set y_max   =  33.5

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 2.5,2.5 \
		 -y $y_min,$y_max -dy 2.0,2.0 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
		 -i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

  <experiment name="RF02_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# DYCOMS rf02 experiment centered at 125.5W, 31.5N
# set up the grid box bound
  set lon_min =  236.25
  set lon_max =  238.75
  set lat_min =  30.5
  set lat_max =  32.5

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  235.0
  set x_max   =  240.0
  set y_min   =  29.5
  set y_max   =  33.5

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 2.5,2.5 \
                 -y $y_min,$y_max -dy 2.0,2.0 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
                 -i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>

  <experiment name="GCSS_ARM_gridspec">
    <input>
      <csh><![CDATA[
# All this needs to be in the INPUT directory
cd $workDir/INPUT
rm -f input.nml
rm -f grid_spec.nc

set machinename = `uname -m`

if ( $(platform) =~ '*ncrc*' ) then
  alias make_xgrids /ncrc/home2/Seth.Underwood/bin/make_xgrids.x86_64
  alias grid_gen /ncrc/home2/Charles.Seman/bin/grid_gen_perth.pl
  set occam_file = $PDATA/gfdl/fms/SCM/perth/OCCAM_p5degree.nc
else if ( $(platform) =~ '*gfdl*' ) then
  alias make_xgrids /home/sdu/bin/make_xgrids_perth.$machinename
  alias grid_gen /home/sdu/bin/grid_gen_perth.pl
  set occam_file = /archive/fms/SCM/perth/OCCAM_p5degree.nc
  dmget $occam_file
endif

# GCSS ARM experiment centered at 97.5W, 36.0N
# However this location is over land so the model would output zsurf ~ 300m,
# This causes problems in surface drag calculation in scm_gcss_arm.F90.
# For convenience, use an ocean location 127.5W, 36.0N, so zsurf = 0.
# set up the grid box bound
  set lon_min =  231.25
  set lon_max =  233.75
  set lat_min =  35.0
  set lat_max =  37.0

# x_min should be less than lon_min and x_max should be greater than lon_max
# y_min should be less than lat_min and y_max should be greater than lat_max

  set x_min   =  230.0
  set x_max   =  235.0
  set y_min   =  34.0
  set y_max   =  38.0

#set the ocean grid file used to create grid_spec file
 set ocean_grid_file = "ocean_grid"

#generate the ocean grid
grid_gen -nx 2 -ny 2 -nz 3 -x $x_min,$x_max -dx 2.5,2.5 \
                 -y $y_min,$y_max -dy 2.0,2.0 -z 0.0,220.,5500., -dz 10.,10.,367.14286 \
                 -i "$occam_file" -f "topo" -o $ocean_grid_file

  cat >x.dat <<EOF
  $lon_min
  $lon_max
EOF
  cat >y.dat <<EOF
  $lat_min
  $lat_max
EOF
 make_xgrids -o $ocean_grid_file.nc -a x.dat,y.dat -l x.dat,y.dat >&make_xgrids.out

# Unset aliases and unneeded variables
unalias make_xgrids
unalias grid_gen
unset ocean_grid_file
unset occam_file
      ]]></csh>
    </input>
  </experiment>


<!--===============================-->
<!--= LAYOUTS FOR SCM EXPERIMENTS =-->
<!--===============================-->

  <freInclude name="scm_twp_basic">
        <run days="24" hours="18" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=302.15">
                                  <!-- Initialize soil temperature to initial TSKIN -->
                <resources jobWallclock="00:30:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_twp_short">
        <run days="3" hours="0" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=302.15">
                                <!-- Initialize soil temperature to initial TSKIN -->
                <resources jobWallclock="00:15:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_mc3e_basic">
        <run days="45" hours="21" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=287.1">
                                  <!-- Initialize soil temperature to initial TSKIN -->
                <resources jobWallclock="00:30:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_gate_basic">
        <run days="19" hours="18" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=300.2">
                                  <!-- Initialize soil temperature to initial TSKIN (even though we are over ocean!) -->
                <resources jobWallclock="00:30:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_gate_debug">
        <run days="12" hours="15" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=300.2">
                                  <!-- Initialize soil temperature to initial TSKIN (even though we are over ocean!) -->
                <resources jobWallclock="00:30:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_do_chksum">
        <run days="1" overrideParams="coupler_nml : do_chksum=.true.">
                <resources jobWallclock="00:30:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_trapnan">
        <run days="0" hours="3">
                <resources jobWallclock="00:10:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

<!-- Additional Experiments: ZNT 20200218 -->
  <freInclude name="scm_bomex_basic">
        <!--run days="5" hours="0" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=299.8"-->
        <run days="1" hours="0" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=299.8">
                                <!-- Initialize soil temperature to initial TSKIN (even though we are over ocean!) -->
                <resources jobWallclock="01:00:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

<!-- Additional Experiments: ZNT 20200414 -->
  <freInclude name="scm_dcbl_basic">
        <!--run days="1" hours="0" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=297.2"-->
        <run days="1" hours="" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=297.2" >
                                <!-- Initialize soil temperature to initial TSKIN (even though we are over ocean!) -->
                <resources jobWallclock="01:00:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

<!-- Additional Experiments: ZNT 20200226 -->
  <freInclude name="scm_rf01_a_basic">
        <run days="1" hours="0" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=292.5">
                                <!-- Initialize soil temperature to initial TSKIN (even though we are over ocean!) -->
                <resources jobWallclock="01:00:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_rf02_basic">
        <run days="1" hours="0" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=292.5">
                                <!-- Initialize soil temperature to initial TSKIN (even though we are over ocean!) -->
                <resources jobWallclock="01:00:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

  <freInclude name="scm_gcss_arm_basic">
        <run days="0" hours="15" overrideParams="fms_nml :clock_grain='ROUTINE'; soil_nml :init_temp=291.5">
                                <!-- Initialize soil temperature to initial TSKIN -->
                <resources jobWallclock="01:00:00">
                <atm ranks="1" threads="1"    layout = "1,1"  io_layout = "1,1" />
                <lnd                          layout = "1,1"  io_layout = "1,1" />
                <ocn ranks="0" threads="0"    layout = "1,1"  io_layout = "1,1" />
                <ice                          layout = "1,1"  io_layout = "1,1" />
                </resources>
        </run>
  </freInclude>

<!-- Additional Experiments: ZNT 20200218 -->

<!--=====================-->
<!--= BOMEX EXPERIMENTS =-->
<!--=====================-->
  <experiment name="BOMEX_$(AWG_EXPERIMENT)" inherit="$(AWG_EXPERIMENT)">
        <description>
      Single Column Model for BOMEX Trade cumulus case 
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <executable file="$(SCM_EXECUTABLE)"/>
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = $atm_threads
      </namelist>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        hours  = $hours,
        dt_atmos = 1800,
        dt_cpld = 1800,
        current_date = 1969, 6, 22, 0, 0, 0,
        calendar = 'julian'
        concurrent = .false.
        do_ocean = .false.
	do_land  = .false.
        ocean_npes = 0
        atmos_npes = $atm_ranks
        atmos_nthreads = $atm_threads
      </namelist>
      <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 2000,
        max_output_fields = 2000
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
      </namelist>
      <namelist name="fv_core_nml">
        layout = $atm_layout
        nlon=1
        mlat=1
        nlev= $(NMODEL_LEVELS)
        adjust_dry_mass = .false.
        full_phys = .false.
        pft_phys  = .false.
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce=.true.
        interp_method = 'first_order'
        do_alltoall = .false.
      </namelist>
      <namelist name="fms_io_nml">
        threading_read  = 'multi',
        max_files_r = 100,
        max_files_w = 100,
        dr_set_size = 1
      </namelist>
      <namelist name="physics_driver_nml">
        n_land = 300.e6,
        n_ocean = 100.e6,
        do_radiation = .false.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .false.,
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 3600,
        use_single_lw_sw_ts = .false., 
      </namelist>
      <namelist name="scm_forc_nml">
        experiment = 'bomex',
        use_scm_rad = .false.,
        do_specified_land       = .false.,
        do_specified_flux       = .true.,
        do_specified_tskin      = .false.,
        do_specified_albedo     = .false.,
        do_specified_rough_leng = .false.,
      </namelist>
      <namelist name="scm_bomex_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        do_siebesma = .true.,
        wpthlp_sfc = 8.e-3,
        wpqtp_sfc  = 5.2e-5,
      </namelist>
      <namelist name="scm_prog_var_nml">
        do_semi_prog= .false.
      </namelist>
      <namelist name="topography_nml">
        topog_file = 'INPUT/navy_topography.data.nc',
        water_file = 'INPUT/navy_pctwater.data.nc'
      </namelist>
      <namelist name="river_nml">
        do_rivers = .false.
        dt_slow     = 86400.
        land_area_called_cellarea = .true.
        all_big_outlet_ctn0 = .true.
        ave_DHG_exp = 0.55, 0.45, 0.0
        ave_DHG_coef = 7.5, 0.3, 0.444444444
        ave_AAS_exp = 0.26, 0.40, 0.34
      </namelist>
      <namelist name="static_veg_nml">
        use_static_veg = .false.
        write_static_veg = .false.
        timeline   = 'loop'
        start_loop = 1981, 1, 1, 0, 0, 0
        end_loop   = 1982, 1, 1, 0, 0, 0
        fill_land_mask = .TRUE.
        input_file = 'INPUT/19810101.static_veg_out.nc'
      </namelist>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = $(DO_MG_DRAG),
        do_cg_drag = .true.
        do_topo_drag = $(DO_TOPO_ROUGH),
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = $(DO_TOPO_ROUGH)
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/$(TOPO_ROUGH_FILE)',
      </namelist>
 
      <xi:include xpointer="xpointer(//experiment[@name='BOMEX_gridspec']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='navy_data']/input/node())"/>

<!-- the following are common to all the AWG_EXPERIMENT AM4 global models -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='amip_sst_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_AM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_co2']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_grid_only']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_stack_size']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='csh_adjust_dry_mass']/input/node())"/>

<!-- use for AM4 prototype configuration g11r11 AMIP experiments -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_AM4_v20170208']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='emissions_cmip6_v20161213']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='common_cmip6']/input/node())"/>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$DEV/Charles.Seman/awg/input/cmip5/chemlbf</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//freInclude[@name='Volcano_Solar_TimeSeries_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4p11']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='L32_gas_conc']/input/node())"/>

      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mls.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mlw.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/tropic.dat
        </dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/diag_table/diag_table_scm_mf  <!-- yi-hsuan -->
        </dataSource>
      </dataFile>
    </input>
    <runtime>
      <regression name="basic">
          <xi:include xpointer="xpointer(//freInclude[@name='scm_bomex_basic']/node())"/>
      </regression>
    </runtime>
  </experiment>

   <experiment name="BOMEX_$(AWG_EXPERIMENT)_nodeep" inherit="BOMEX_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for BOMEX Trade cumulus case
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="uw_conv_nml">
        rkm_sh1         = 7.0,
        rkm_sh          = 3.0,
        do_deep         = .false.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_new_let     = .true.
        do_new_subflx   = .true.
        do_new_pevap    = .false.
        plev_cin        = 60000.
        plev_for        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        do_new_qnact    = .true.
        do_prog_gust    = .true.
        cgust0          = 2.
        cgust_max       = 4.
        tracer_check_type = 2
        stop_at_let     = .true.
        lofactor0       = 0.5
        do_umf_pbl      = .true.
        do_new_convcld  = .true.
        do_minmse       = .true.
        reproduce_old_version = .false.
        do_conv_micro_N = .false.
        N0 = 100.e6
        do_eis_limit = .true.
        eis_max = 8.
      </namelist>
    </input>
  </experiment>

   <experiment name="BOMEX_$(AWG_EXPERIMENT)_old" inherit="BOMEX_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for BOMEX Trade cumulus case
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="scm_bomex_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        do_siebesma = .false.,
        flux_t_sfc = 9.52,
        flux_q_sfc = 153.4,
      </namelist>
    </input>
  </experiment>

   <experiment name="BOMEX_$(AWG_EXPERIMENT)_nodeep_old" inherit="BOMEX_$(AWG_EXPERIMENT)_nodeep">
    <description>
      Single Column Model for BOMEX Trade cumulus case
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="scm_bomex_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        do_siebesma = .false.,
        flux_t_sfc = 9.52,
        flux_q_sfc = 153.4,
      </namelist>
    </input>
  </experiment>



   <experiment name="BOMEX_$(AWG_EXPERIMENT)_nodeep_nopr" inherit="BOMEX_$(AWG_EXPERIMENT)_nodeep">
    <description>
      Single Column Model for BOMEX Trade cumulus case
      using settings from global AWG experiment, 
      with deep plume and precip disabled.
    </description>
    <input>
      <!-- uw_plume_nml from awg_include/nml/am4p0_physics.nml, 
           but with very large auto_th0 to disable precip -->
      <namelist name="uw_plume_nml">
        r_thresh = 10.
        auto_th0 = 1.0e10,
        tcrit    = -25.15,
        peff_l   = 6.0e-5
        peff_i   = 11.e-5
        frac_drs = 0.5
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 6
        scaleh0  = 1000.
        beta = 0.0
        rkm_max = 15
        mp_choice = 3
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.85
        hcevappbl = 0.95
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        do_limit_fdr  = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
        nom_ratio = 0.7
      </namelist>

      <!-- rotstayn_klein_mp_nml from awg_include/nml/am4p0_physics.nml, 
           but with very large rthresh to disable rain, and zero vfact
           to disable ice sedimentation. For details,
           please refer to atmos_param/strat_cloud/rotstayn_klein_mp.F90
           (equations 30, 35, 49).
           Note: I am unable to disable the conversion from cloud ice to
           rain, which still contributes to precip formation.
           (Compare qidt_melt and lscale_rain3d output) -->
      <namelist name="rotstayn_klein_mp_nml">
        rk_act_only_if_ql_gt_qmin = .true.
        include_homogeneous_for_wetdep = .false.
        include_adjustment_for_wetdep = .true.
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        rthresh = 1.0e10,
        U_evap_snow = 1.0
        vfact = 0.9
      </namelist>

    </input>
  </experiment>

   <experiment name="BOMEX_$(AWG_EXPERIMENT)_noprec" inherit="BOMEX_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for BOMEX Trade cumulus case
      using settings from global AWG experiment, with precip disabled.
    </description>
    <input>
      <!-- uw_plume_nml from awg_include/nml/am4p0_physics.nml, 
           but with very large auto_th0 to disable precip -->
      <namelist name="uw_plume_nml">
        r_thresh = 10.
        auto_th0 = 1.0e10,
        tcrit    = -25.15,
        peff_l   = 6.0e-5
        peff_i   = 11.e-5
        frac_drs = 0.5
        rpen     = 4.0
        wmin     = 0.5
        deltaqc0 = 0.5e-3
        do_pdfpcp= .false.
        do_pmadjt= .true.
        do_emmax = .true.
        do_pnqv  = .true.
        mixing_assumption = 6
        scaleh0  = 1000.
        beta = 0.0
        rkm_max = 15
        mp_choice = 3
        do_pevap = .true.
        do_new_pblfac = .true.
        include_emf_s = .false.
        cfrac    = 0.15
        hcevap   = 0.85
        hcevappbl = 0.95
        pblfac   = 1.0
        emfrac_max = 0.25
        rmaxfrac = 0.1
        do_limit_wmax = .true.
        do_limit_fdr  = .true.
        wmax = 20.
        do_tten_max = .false.
        tten_max = 1000
        bigc = 0.0
        nom_ratio = 0.7
      </namelist>

      <!-- deep_conv_nml from awg_include/nml/am4p0_physics.nml, 
           but with very large auto_th0_d to disable precip -->
      <namelist name="deep_conv_nml">
        crh_th_ocean = 0.4
        crh_th_land  = 0.4
        auto_th0_d = 1.0e10
        tcrit_d    = -25.15,
        peff_l_d   = 6.0e-5
        peff_i_d   = 11.e-5
        rkm_dp1 = 0.9
        rkm_dp2 = 0.1
        crh_max = 1.0
        cwfn_th = 10.
        tau_dp = 28800.
        mixing_assumption_d = 6
        do_ppen_d  = .true.
        rpen_d     = 4.0
        do_pevap_d = .true.
        cfrac_d    = 0.15
        hcevap_d   = 0.85
        hcevappbl_d = 0.95
        pblfac_d   = 1.0
        frac_limit_d = 0.25
        dcwfndm_th = 100
        lofactor_d = 1.0
        do_cgust_dp  = .true.
        cgust_choice = 1
        include_emf_d = .false.
      </namelist>

      <!-- rotstayn_klein_mp_nml from awg_include/nml/am4p0_physics.nml, 
           but with very large rthresh to disable rain, and zero vfact
           to disable ice sedimentation. For details,
           please refer to atmos_param/strat_cloud/rotstayn_klein_mp.F90
           (equations 30, 35, 49).
           Note: I am unable to disable the conversion from cloud ice to
           rain, which still contributes to precip formation.
           (Compare qidt_melt and lscale_rain3d output) -->
      <namelist name="rotstayn_klein_mp_nml">
        rk_act_only_if_ql_gt_qmin = .true.
        include_homogeneous_for_wetdep = .false.
        include_adjustment_for_wetdep = .true.
        num_mass_ratio1 = 1.0
        num_mass_ratio2 = 0.
        rthresh = 1.0e10,
        U_evap_snow = 1.0
        vfact = 0.9
      </namelist>

    </input>
  </experiment>

  <freInclude name="field_table_am4_clubb">
    <input>
      <dataFile label="fieldTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$(AWG_INPUT_HOME)/field_table/field_table_clubb</dataSource>
      </dataFile>
    </input>
  </freInclude>

  <experiment name="BOMEX_$(AWG_EXPERIMENT)_clubb" inherit="BOMEX_$(AWG_EXPERIMENT)">
   <description>
      Single Column Model for BOMEX Trade cumulus case
      using settings from global AWG experiment, with CLUBB scheme.
   </description>
   <input>
    <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4_clubb']/input/node())"/>
    <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 5000,
        max_output_fields = 2000
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
    </namelist>
     <namelist name="physics_driver_nml">
      do_liq_num = .true.,
      do_ice_num = .true.,
      n_land  = 300.e6,
      n_ocean = 100.e6,
      do_radiation = .false.,
      do_clubb = 2
    </namelist>
    <namelist name="moist_processes_nml">
      do_uw_conv = .true.
      do_height_adjust = .true.
      use_online_aerosol = .true.
      use_sub_seasalt = .true.
    </namelist>
    <namelist name="lscloud_driver_nml">
      aerosol_activation_scheme = "total"
      cfact = 1.0
      Dmin = 1.0e-07,
      microphys_scheme = 'ncar'
      macrophys_scheme = 'clubb'
      do_ice_nucl_wpdf  = .true.
      do_pdf_clouds = .false.
      pdf_org       = .false.
      betap =           5
      qthalfwidth =  0.1
      use_cf_metadata = .true.
    </namelist>
    <namelist name="vert_turb_driver_nml">
      gust_scheme      = 'beljaars',
      do_mellor_yamada = .false.,
      do_entrain       = .false.,
      do_edt           = .false.,
      do_diffusivity   = .false.,
      do_stable_bl     = .true.,
      do_shallow_conv  = .false.
    </namelist>
    <namelist name="clubb_setting_nml">
      debug_level = 0
      CLUBB_dt        = 120
      do_BL_gauss         = .false.,
      do_diffK_gauss      = .false.,
      do_quadrature_gauss = .true.,
      Var_w = 4.0,
      do_drp_evap_cf = .true.,
      use_sclr_HOC  = .true.
      aeromass_clubb_const = 5.e-12,
      do_conv_flag_clubb = 1
      host_dx = 100.0e3
      host_dy = 100.0e3
      avg_deltaz = 2.e3
      icheck_temp = 1
      rh_factor = 1.0
      use_qcvar_in_cloud = .true.
      qcvar_clubb_min = 0.01
      qcvar_clubb_max = 10.0
    </namelist>
    <namelist name="initvars">
      C1 = 1.0
      C4 = 1.0
      C5 = 0.0
      C6rt = 0.5
      C6thl = 0.5
      C7 = 0.8
      C11b = 0.15
      C6rt_Lscale0  = 30.0 ! Used to damp C6rt as a function of Lscale
      C6thl_Lscale0 = 30.0 ! Used to damp C6thl as a function of Lscale
      C7_Lscale0    = 0.99  ! Damp C7 as a function of Lscale
      wpxp_L_thresh = 150.0 ! Lscale threshold for damping C6 and C7 coefficients [m]
      altitude_threshold_GFDL = 300.0 !  Altitude above which damping should occur [m]
    </namelist>
    <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
    <dataFile label="diagTable" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/diag_table/diag_table_scm_clubb
        </dataSource>
    </dataFile>
   </input>
  </experiment>

   <experiment name="BOMEX_$(AWG_EXPERIMENT)_clubb_nodeep" inherit="BOMEX_$(AWG_EXPERIMENT)_clubb">
    <description>
      Single Column Model for BOMEX Trade cumulus case with CLUBB,
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <!-- uw_conv_nml from awg_include/nml/am4p0_physics.nml, 
           but with do_deep = .false. -->
      <namelist name="uw_conv_nml">
        rkm_sh1         = 7.0,
        rkm_sh          = 3.0,
        do_deep         = .false.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_new_let     = .true.
        do_new_subflx   = .true.
        do_new_pevap    = .false.
        plev_cin        = 60000.
        plev_for        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        do_new_qnact    = .true.
        do_prog_gust    = .true.
        cgust0          = 2.
        cgust_max       = 4.
        tracer_check_type = 2
        stop_at_let     = .true.
        lofactor0       = 0.5
        do_umf_pbl      = .true.
        do_new_convcld  = .true.
        do_minmse       = .true.
        reproduce_old_version = .false.
        do_conv_micro_N = .false.
        N0 = 100.e6
        do_eis_limit = .true.
        eis_max = 8.
      </namelist>
    </input>
  </experiment>

<!--====================-->
<!--= DCBL EXPERIMENTS =-->
<!--====================-->
  <experiment name="DCBL_C1_$(AWG_EXPERIMENT)" inherit="$(AWG_EXPERIMENT)">
        <description>
      Single Column Model for dry convective boundary layer (DCBL) - Case 1
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <executable file="$(SCM_EXECUTABLE)"/>
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = $atm_threads
      </namelist>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        hours  = $hours,
        dt_atmos = 1800,
        dt_cpld = 1800,
        current_date = 1969, 6, 22, 0, 0, 0,
        calendar = 'julian'
        concurrent = .false.
        do_ocean = .false.
	do_land  = .false.
        ocean_npes = 0
        atmos_npes = $atm_ranks
        atmos_nthreads = $atm_threads
      </namelist>
      <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 2000,
        max_output_fields = 2000
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
      </namelist>
      <namelist name="fv_core_nml">
        layout = $atm_layout
        nlon=1
        mlat=1
        nlev= $(NMODEL_LEVELS)
        adjust_dry_mass = .false.
        full_phys = .false.
        pft_phys  = .false.
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce=.true.
        interp_method = 'first_order'
        do_alltoall = .false.
      </namelist>
      <namelist name="fms_io_nml">
        threading_read  = 'multi',
        max_files_r = 100,
        max_files_w = 100,
        dr_set_size = 1
      </namelist>
      <namelist name="physics_driver_nml">
        n_land = 300.e6,
        n_ocean = 100.e6,
        do_radiation = .false.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .false.,
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 3600,
        use_single_lw_sw_ts = .false., 
      </namelist>
      <namelist name="scm_forc_nml">
        experiment = 'dcbl',
        use_scm_rad = .false.,
        do_specified_land       = .false.,
        do_specified_flux       = .true.,
        do_specified_tskin      = .false.,
        do_specified_albedo     = .false.,
        do_specified_rough_leng = .false.,
      </namelist>
      <namelist name="scm_dcbl_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        wthl_sfc = 0.06,
        wqt_sfc = 0.0,
        dthldz = 1.95,
      </namelist>
      <namelist name="scm_prog_var_nml">
        do_semi_prog= .false.
      </namelist>
      <namelist name="topography_nml">
        topog_file = 'INPUT/navy_topography.data.nc',
        water_file = 'INPUT/navy_pctwater.data.nc'
      </namelist>
      <namelist name="river_nml">
        do_rivers = .false.
        dt_slow     = 86400.
        land_area_called_cellarea = .true.
        all_big_outlet_ctn0 = .true.
        ave_DHG_exp = 0.55, 0.45, 0.0
        ave_DHG_coef = 7.5, 0.3, 0.444444444
        ave_AAS_exp = 0.26, 0.40, 0.34
      </namelist>
      <namelist name="static_veg_nml">
        use_static_veg = .false.
        write_static_veg = .false.
        timeline   = 'loop'
        start_loop = 1981, 1, 1, 0, 0, 0
        end_loop   = 1982, 1, 1, 0, 0, 0
        fill_land_mask = .TRUE.
        input_file = 'INPUT/19810101.static_veg_out.nc'
      </namelist>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = $(DO_MG_DRAG),
        do_cg_drag = .true.
        do_topo_drag = $(DO_TOPO_ROUGH),
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = $(DO_TOPO_ROUGH)
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/$(TOPO_ROUGH_FILE)',
      </namelist>
 
      <xi:include xpointer="xpointer(//experiment[@name='DCBL_gridspec']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='navy_data']/input/node())"/>

<!-- the following are common to all the AWG_EXPERIMENT AM4 global models -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='amip_sst_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_AM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_co2']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_grid_only']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_stack_size']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='csh_adjust_dry_mass']/input/node())"/>

<!-- use for AM4 prototype configuration g11r11 AMIP experiments -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_AM4_v20170208']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='emissions_cmip6_v20161213']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='common_cmip6']/input/node())"/>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$DEV/Charles.Seman/awg/input/cmip5/chemlbf</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//freInclude[@name='Volcano_Solar_TimeSeries_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4p11']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='L32_gas_conc']/input/node())"/>

      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mls.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mlw.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/tropic.dat
        </dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/diag_table/diag_table_scm_mf  <!-- yi-hsuan -->
        </dataSource>
      </dataFile>
    </input>
    <runtime>
      <regression name="basic">
          <xi:include xpointer="xpointer(//freInclude[@name='scm_dcbl_basic']/node())"/>
      </regression>
    </runtime>
  </experiment>

  <experiment name="DCBL_C2_$(AWG_EXPERIMENT)" inherit="DCBL_C1_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for dry convective boundary layer (DCBL) - Case 2
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <input>
      <namelist name="scm_dcbl_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        wthl_sfc = 0.06,
        wqt_sfc = 0.0,
        dthldz = 2.93,
      </namelist>
    </input>
  </experiment>

  <experiment name="DCBL_C3_$(AWG_EXPERIMENT)" inherit="DCBL_C1_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for dry convective boundary layer (DCBL) - Case 3
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <input>
      <namelist name="scm_dcbl_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        wthl_sfc = 0.06,
        wqt_sfc = 0.0,
        dthldz = 3.9,
      </namelist>
    </input>
  </experiment>

  <experiment name="DCBL_C4_$(AWG_EXPERIMENT)" inherit="DCBL_C1_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for dry convective boundary layer (DCBL) - Case 4
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <input>
      <namelist name="scm_dcbl_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        wthl_sfc = 0.03,
        wqt_sfc = 0.0,
        dthldz = 1.95,
      </namelist>
    </input>
  </experiment>

  <experiment name="DCBL_C5_$(AWG_EXPERIMENT)" inherit="DCBL_C1_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for dry convective boundary layer (DCBL) - Case 5
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <input>
      <namelist name="scm_dcbl_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        wthl_sfc = 0.03,
        wqt_sfc = 0.0,
        dthldz = 2.93,
      </namelist>
    </input>
  </experiment>

  <experiment name="DCBL_C6_$(AWG_EXPERIMENT)" inherit="DCBL_C1_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for dry convective boundary layer (DCBL) - Case 6
      using settings from global AWG experiment.
      (Reference: Siebesma et al. 2007; doi:10.1175/JAS3888.1)
    </description>
    <input>
      <namelist name="scm_dcbl_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        wthl_sfc = 0.03,
        wqt_sfc = 0.0,
        dthldz = 3.9,
      </namelist>
    </input>
  </experiment>

<!-- Additional Experiments: ZNT 20200226 -->

<!--===========================-->
<!--= DYCOMS RF01 EXPERIMENTS =-->
<!--===========================-->
  <experiment name="RF01_A_$(AWG_EXPERIMENT)" inherit="$(AWG_EXPERIMENT)">
        <description>
      Single Column Model for GCSS DYCOMS-II RF01 Experiment A
      using settings from global AWG experiment.
      (Reference: Stevens et al. 2003; doi:10.1175/BAMS-84-5-579)
    </description>
   <executable file="$(SCM_EXECUTABLE)"/>
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = $atm_threads
      </namelist>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        hours  = $hours,
        dt_atmos = 1800,
        dt_cpld = 1800,
        current_date = 2001, 7, 10, 0, 0, 0,
        calendar = 'julian'
        concurrent = .false.
        do_ocean = .false.
	do_land  = .false.
        ocean_npes = 0
        atmos_npes = $atm_ranks
        atmos_nthreads = $atm_threads
      </namelist>
      <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 2000,
        max_output_fields = 2000
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
      </namelist>
      <namelist name="fv_core_nml">
        layout = $atm_layout
        nlon=1
        mlat=1
        nlev= $(NMODEL_LEVELS)
        adjust_dry_mass = .false.
        full_phys = .false.
        pft_phys  = .false.
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce=.true.
        interp_method = 'first_order'
        do_alltoall = .false.
      </namelist>
      <namelist name="fms_io_nml">
        threading_read  = 'multi',
        max_files_r = 100,
        max_files_w = 100,
        dr_set_size = 1
      </namelist>
      <namelist name="physics_driver_nml">
        n_land = 300.e6,
        n_ocean = 100.e6,
        do_radiation = .false.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .false.,
        rad_time_step= 1800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 1800,
        use_single_lw_sw_ts = .false., 
      </namelist>
      <namelist name="scm_forc_nml">
        experiment = 'rf01',
        use_scm_rad = .true.,
        do_specified_land       = .false.,
        do_specified_flux       = .true.,
        do_specified_tskin      = .false.,
        do_specified_albedo     = .false.,
        do_specified_rough_leng = .false.,
      </namelist>
      <namelist name="scm_rf01_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        divf = 3.75e-6,
        p_omega_zero = 90000.,
        do_rad = .true.,
        do_vadv =.true.,
        do_geo  =.true.,
        ustar_sfc  =   0.25,
        flux_t_sfc =  15.0,
        flux_q_sfc = 115.0,
        do_stevens = .true.
      </namelist>
      <namelist name="scm_prog_var_nml">
        do_semi_prog= .false.
      </namelist>
      <namelist name="topography_nml">
        topog_file = 'INPUT/navy_topography.data.nc',
        water_file = 'INPUT/navy_pctwater.data.nc'
      </namelist>
      <namelist name="river_nml">
        do_rivers = .false.
        dt_slow     = 86400.
        land_area_called_cellarea = .true.
        all_big_outlet_ctn0 = .true.
        ave_DHG_exp = 0.55, 0.45, 0.0
        ave_DHG_coef = 7.5, 0.3, 0.444444444
        ave_AAS_exp = 0.26, 0.40, 0.34
      </namelist>
      <namelist name="static_veg_nml">
        use_static_veg = .false.
        write_static_veg = .false.
        timeline   = 'loop'
        start_loop = 1981, 1, 1, 0, 0, 0
        end_loop   = 1982, 1, 1, 0, 0, 0
        fill_land_mask = .TRUE.
        input_file = 'INPUT/19810101.static_veg_out.nc'
      </namelist>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = $(DO_MG_DRAG),
        do_cg_drag = .true.
        do_topo_drag = $(DO_TOPO_ROUGH),
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = $(DO_TOPO_ROUGH)
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/$(TOPO_ROUGH_FILE)',
      </namelist>
 
      <xi:include xpointer="xpointer(//experiment[@name='RF01_gridspec']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='navy_data']/input/node())"/>

<!-- the following are common to all the AWG_EXPERIMENT AM4 global models -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='amip_sst_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_AM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_co2']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_grid_only']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_stack_size']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='csh_adjust_dry_mass']/input/node())"/>

<!-- use for AM4 prototype configuration g11r11 AMIP experiments -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_AM4_v20170208']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='emissions_cmip6_v20161213']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='common_cmip6']/input/node())"/>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$DEV/Charles.Seman/awg/input/cmip5/chemlbf</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//freInclude[@name='Volcano_Solar_TimeSeries_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4p11']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='L32_gas_conc']/input/node())"/>

      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/input/gcss_dycoms2_rf01/rf01_idealb.dat.new2
        </dataSource>
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mls.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mlw.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/tropic.dat
        </dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/diag_table/diag_table_scm
        </dataSource>
      </dataFile>
    </input>
    <runtime>
      <regression name="basic">
          <xi:include xpointer="xpointer(//freInclude[@name='scm_rf01_a_basic']/node())"/>
      </regression>
    </runtime>
  </experiment>

   <experiment name="RF01_A_$(AWG_EXPERIMENT)_nodeep" inherit="RF01_A_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for GCSS DYCOMS-II RF01 Experiment A
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="uw_conv_nml">
        rkm_sh1         = 7.0,
        rkm_sh          = 3.0,
        do_deep         = .false.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_new_let     = .true.
        do_new_subflx   = .true.
        do_new_pevap    = .false.
        plev_cin        = 60000.
        plev_for        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        do_new_qnact    = .true.
        do_prog_gust    = .true.
        cgust0          = 2.
        cgust_max       = 4.
        tracer_check_type = 2
        stop_at_let     = .true.
        lofactor0       = 0.5
        do_umf_pbl      = .true.
        do_new_convcld  = .true.
        do_minmse       = .true.
        reproduce_old_version = .false.
        do_conv_micro_N = .false.
        N0 = 100.e6
        do_eis_limit = .true.
        eis_max = 8.
      </namelist>
    </input>
  </experiment>

   <experiment name="RF01_A_$(AWG_EXPERIMENT)_old" inherit="RF01_A_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for GCSS DYCOMS-II RF01 Experiment A
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="scm_rf01_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        divf = 3.75e-6,
        p_omega_zero = 90000.,
        do_rad = .true.,
        do_vadv =.true.,
        do_geo  =.true.,
        ustar_sfc  =   0.25,
        flux_t_sfc =  15.0,
        flux_q_sfc = 115.0,
        do_stevens = .false.
      </namelist>
    </input>
  </experiment>

   <experiment name="RF01_A_$(AWG_EXPERIMENT)_nodeep_old" inherit="RF01_A_$(AWG_EXPERIMENT)_nodeep">
    <description>
      Single Column Model for GCSS DYCOMS-II RF01 Experiment A
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="scm_rf01_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        divf = 3.75e-6,
        p_omega_zero = 90000.,
        do_rad = .true.,
        do_vadv =.true.,
        do_geo  =.true.,
        ustar_sfc  =   0.25,
        flux_t_sfc =  15.0,
        flux_q_sfc = 115.0,
        do_stevens = .false.
      </namelist>
    </input>
  </experiment>

<!--===========================-->
<!--= DYCOMS RF02 EXPERIMENTS =-->
<!--===========================-->
  <experiment name="RF02_$(AWG_EXPERIMENT)" inherit="$(AWG_EXPERIMENT)">
        <description>
      Single Column Model for GCSS DYCOMS-II RF02 Experiment
      using settings from global AWG experiment.
      (Reference: Stevens et al. 2003; doi:10.1175/BAMS-84-5-579)
    </description>
   <executable file="$(SCM_EXECUTABLE)"/>
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = $atm_threads
      </namelist>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        hours  = $hours,
        dt_atmos = 1800,
        dt_cpld = 1800,
        current_date = 2001, 7, 11, 0, 0, 0,
        calendar = 'julian'
        concurrent = .false.
        do_ocean = .false.
	do_land  = .false.
        ocean_npes = 0
        atmos_npes = $atm_ranks
        atmos_nthreads = $atm_threads
      </namelist>
      <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 2000,
        max_output_fields = 2000
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
      </namelist>
      <namelist name="fv_core_nml">
        layout = $atm_layout
        nlon=1
        mlat=1
        nlev= $(NMODEL_LEVELS)
        adjust_dry_mass = .false.
        full_phys = .false.
        pft_phys  = .false.
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce=.true.
        interp_method = 'first_order'
        do_alltoall = .false.
      </namelist>
      <namelist name="fms_io_nml">
        threading_read  = 'multi',
        max_files_r = 100,
        max_files_w = 100,
        dr_set_size = 1
      </namelist>
      <namelist name="physics_driver_nml">
        n_land = 300.e6,
        n_ocean = 100.e6,
        do_radiation = .false.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .false.,
        rad_time_step= 1800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 1800,
        use_single_lw_sw_ts = .false., 
      </namelist>
      <namelist name="scm_forc_nml">
        experiment = 'rf02',
        use_scm_rad = .true.,
        do_specified_land       = .false.,
        do_specified_flux       = .true.,
        do_specified_tskin      = .false.,
        do_specified_albedo     = .false.,
        do_specified_rough_leng = .false.,
      </namelist>
      <namelist name="scm_rf02_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        divf = 3.75e-6,
        p_omega_zero = 90000.,
        do_rad = .true.,
        do_vadv =.true.,
        do_geo  =.true.,
        rho_sfc = 1.21,
        ustar_sfc  = 0.25,
        flux_t_sfc = 16.0,
        flux_q_sfc = 93.0,
      </namelist>
      <namelist name="scm_prog_var_nml">
        do_semi_prog= .false.
      </namelist>
      <namelist name="topography_nml">
        topog_file = 'INPUT/navy_topography.data.nc',
        water_file = 'INPUT/navy_pctwater.data.nc'
      </namelist>
      <namelist name="river_nml">
        do_rivers = .false.
        dt_slow     = 86400.
        land_area_called_cellarea = .true.
        all_big_outlet_ctn0 = .true.
        ave_DHG_exp = 0.55, 0.45, 0.0
        ave_DHG_coef = 7.5, 0.3, 0.444444444
        ave_AAS_exp = 0.26, 0.40, 0.34
      </namelist>
      <namelist name="static_veg_nml">
        use_static_veg = .false.
        write_static_veg = .false.
        timeline   = 'loop'
        start_loop = 1981, 1, 1, 0, 0, 0
        end_loop   = 1982, 1, 1, 0, 0, 0
        fill_land_mask = .TRUE.
        input_file = 'INPUT/19810101.static_veg_out.nc'
      </namelist>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = $(DO_MG_DRAG),
        do_cg_drag = .true.
        do_topo_drag = $(DO_TOPO_ROUGH),
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = $(DO_TOPO_ROUGH)
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/$(TOPO_ROUGH_FILE)',
      </namelist>
 
      <xi:include xpointer="xpointer(//experiment[@name='RF02_gridspec']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='navy_data']/input/node())"/>

<!-- the following are common to all the AWG_EXPERIMENT AM4 global models -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='amip_sst_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_AM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_co2']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_grid_only']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_stack_size']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='csh_adjust_dry_mass']/input/node())"/>

<!-- use for AM4 prototype configuration g11r11 AMIP experiments -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_AM4_v20170208']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='emissions_cmip6_v20161213']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='common_cmip6']/input/node())"/>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$DEV/Charles.Seman/awg/input/cmip5/chemlbf</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//freInclude[@name='Volcano_Solar_TimeSeries_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4p11']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='L32_gas_conc']/input/node())"/>

      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mls.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mlw.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/tropic.dat
        </dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/diag_table/diag_table_scm
        </dataSource>
      </dataFile>
    </input>
    <runtime>
      <regression name="basic">
          <xi:include xpointer="xpointer(//freInclude[@name='scm_rf02_basic']/node())"/>
      </regression>
    </runtime>
  </experiment>

   <experiment name="RF02_$(AWG_EXPERIMENT)_nodeep" inherit="RF02_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for GCSS DYCOMS-II RF02 Experiment
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="uw_conv_nml">
        rkm_sh1         = 7.0,
        rkm_sh          = 3.0,
        do_deep         = .false.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_new_let     = .true.
        do_new_subflx   = .true.
        do_new_pevap    = .false.
        plev_cin        = 60000.
        plev_for        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        do_new_qnact    = .true.
        do_prog_gust    = .true.
        cgust0          = 2.
        cgust_max       = 4.
        tracer_check_type = 2
        stop_at_let     = .true.
        lofactor0       = 0.5
        do_umf_pbl      = .true.
        do_new_convcld  = .true.
        do_minmse       = .true.
        reproduce_old_version = .false.
        do_conv_micro_N = .false.
        N0 = 100.e6
        do_eis_limit = .true.
        eis_max = 8.
      </namelist>
    </input>
  </experiment>


<!--======================-->
<!--= ARM 97 EXPERIMENTS =-->
<!--======================-->
  <experiment name="GCSS_ARM_$(AWG_EXPERIMENT)" inherit="$(AWG_EXPERIMENT)">
        <description>
      Single Column Model for GCSS ARM Experiment
      using settings from global AWG experiment.
      (Reference: Brown et al. 2002; doi:10.1256/003590002320373210)
    </description>
   <executable file="$(SCM_EXECUTABLE)"/>
    <input>
      <namelist name="atmos_model_nml">
         nxblocks = 1
         nyblocks = $atm_threads
      </namelist>
      <namelist name="coupler_nml">
        months = $months,
        days   = $days,
        hours  = $hours,
        dt_atmos = 1800,
        dt_cpld = 1800,
        current_date = 1997, 6, 21, 11, 30, 0,
        calendar = 'julian'
        concurrent = .false.
        do_ocean = .false.
	do_land  = .false.
        ocean_npes = 0
        atmos_npes = $atm_ranks
        atmos_nthreads = $atm_threads
      </namelist>
      <namelist name="diag_manager_nml">
        mix_snapshot_average_fields = .false.,
        max_input_fields = 2000,
        max_output_fields = 2000
        max_axes = 100
        max_num_axis_sets = 50
        max_files = 40
        issue_oor_warnings = .false.
        max_axis_attributes=4
      </namelist>
      <namelist name="fv_core_nml">
        layout = $atm_layout
        nlon=1
        mlat=1
        nlev= $(NMODEL_LEVELS)
        adjust_dry_mass = .false.
        full_phys = .false.
        pft_phys  = .false.
      </namelist>
      <namelist name="xgrid_nml">
        make_exchange_reproduce=.true.
        interp_method = 'first_order'
        do_alltoall = .false.
      </namelist>
      <namelist name="fms_io_nml">
        threading_read  = 'multi',
        max_files_r = 100,
        max_files_w = 100,
        dr_set_size = 1
      </namelist>
      <namelist name="physics_driver_nml">
        n_land = 300.e6,
        n_ocean = 100.e6,
        do_radiation = .false.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .false.,
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 3600,
        use_single_lw_sw_ts = .false., 
      </namelist>
      <namelist name="scm_forc_nml">
         experiment = 'gcss_arm',
         use_scm_rad = .false.,
         do_specified_flux = .true.,
         do_specified_land = .true.,
         do_specified_tskin      = .true.,
         do_specified_albedo     = .true.,
         do_specified_rough_leng = .true.,
      </namelist>
      <namelist name="scm_gcss_arm_nml">
         tracer_vert_advec_scheme = 4,
         temp_vert_advec_scheme = 4,
         momentum_vert_advec_scheme = 1,
         do_geo  =.true.,
         rad_scheme = 'simplified'
         init_date  = 1997, 6, 21, 11, 30, 0,
         current_date = 1997, 6, 21, 11, 30, 0,
         dt_atmos = 1800,
      </namelist>
      <namelist name="scm_prog_var_nml">
        do_semi_prog= .false.
      </namelist>
      <namelist name="topography_nml">
        topog_file = 'INPUT/navy_topography.data.nc',
        water_file = 'INPUT/navy_pctwater.data.nc'
      </namelist>
      <namelist name="river_nml">
        do_rivers = .false.
        dt_slow     = 86400.
        land_area_called_cellarea = .true.
        all_big_outlet_ctn0 = .true.
        ave_DHG_exp = 0.55, 0.45, 0.0
        ave_DHG_coef = 7.5, 0.3, 0.444444444
        ave_AAS_exp = 0.26, 0.40, 0.34
      </namelist>
      <namelist name="static_veg_nml">
        use_static_veg = .false.
        write_static_veg = .false.
        timeline   = 'loop'
        start_loop = 1981, 1, 1, 0, 0, 0
        end_loop   = 1982, 1, 1, 0, 0, 0
        fill_land_mask = .TRUE.
        input_file = 'INPUT/19810101.static_veg_out.nc'
      </namelist>
      <namelist name="damping_driver_nml">
        trayfric = 0.,
        nlev_rayfric = 1,
        do_mg_drag = $(DO_MG_DRAG),
        do_cg_drag = .true.
        do_topo_drag = $(DO_TOPO_ROUGH),
        do_conserve_energy = .true.,
        kstart= 0
      </namelist>
      <namelist name="topo_rough_nml">
        use_topo_rough    = $(DO_TOPO_ROUGH)
        max_topo_rough    = 100.0
        topo_rough_factor = 0.01
        topo_rough_source = 'input',
        topo_rough_file = 'INPUT/$(TOPO_ROUGH_FILE)',
      </namelist>
 
      <xi:include xpointer="xpointer(//experiment[@name='GCSS_ARM_gridspec']/input/node())"/>
      <xi:include xpointer="xpointer(//experiment[@name='navy_data']/input/node())"/>

<!-- the following are common to all the AWG_EXPERIMENT AM4 global models -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_LM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='amip_sst_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_AM4']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='data_table_co2']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_grid_only']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='c96_stack_size']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='csh_adjust_dry_mass']/input/node())"/>

<!-- use for AM4 prototype configuration g11r11 AMIP experiments -->

      <xi:include xpointer="xpointer(//freInclude[@name='common_AM4_v20170208']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='emissions_cmip6_v20161213']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='common_cmip6']/input/node())"/>
      <dataFile label="input" target="INPUT/" chksum="" size="" timestamp="">
        <dataSource platform="$(platform)">$DEV/Charles.Seman/awg/input/cmip5/chemlbf</dataSource>
      </dataFile>
      <xi:include xpointer="xpointer(//freInclude[@name='Volcano_Solar_TimeSeries_cmip6']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='diag_table_lm3p2_fullaero']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='field_table_am4p11']/input/node())"/>
      <xi:include xpointer="xpointer(//freInclude[@name='L32_gas_conc']/input/node())"/>

      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mls.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/mlw.dat
        </dataSource>
      </dataFile>
      <dataFile label="input" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_SRC)/atmos_scm/SCM_include/input/tropic.dat
        </dataSource>
      </dataFile>
      <dataFile label="diagTable" target="INPUT/"
                chksum="" size="" timestamp="">
        <dataSource site="$(site)">
          $(SCM_INCLUDE)/diag_table/diag_table_scm_mf <!-- yihsuan -->
        </dataSource>
      </dataFile>
    </input>
    <runtime>
      <regression name="basic">
          <xi:include xpointer="xpointer(//freInclude[@name='scm_gcss_arm_basic']/node())"/>
      </regression>
    </runtime>
  </experiment>

  <experiment name="GCSS_ARM_$(AWG_EXPERIMENT)_nodeep" inherit="GCSS_ARM_$(AWG_EXPERIMENT)">
    <description>
      Single Column Model for GCSS ARM Experiment
      using settings from global AWG experiment, with deep plume disabled.
    </description>
    <input>
      <namelist name="uw_conv_nml">
        rkm_sh1         = 7.0,
        rkm_sh          = 3.0,
        do_deep         = .false.,
        idpchoice       = 2
        do_rescale      = .true.
        do_rescale_t    = .true.
        use_new_let     = .true.
        do_new_subflx   = .true.
        do_new_pevap    = .false.
        plev_cin        = 60000.
        plev_for        = 60000.
        src_choice      = 1
        wrel_min        = 1.
        do_new_qnact    = .true.
        do_prog_gust    = .true.
        cgust0          = 2.
        cgust_max       = 4.
        tracer_check_type = 2
        stop_at_let     = .true.
        lofactor0       = 0.5
        do_umf_pbl      = .true.
        do_new_convcld  = .true.
        do_minmse       = .true.
        reproduce_old_version = .false.
        do_conv_micro_N = .false.
        N0 = 100.e6
        do_eis_limit = .true.
        eis_max = 8.
      </namelist>
    </input>
  </experiment>

  <experiment name="BOMEX_$(AWG_EXPERIMENT)_nml_chuck" inherit="BOMEX_$(AWG_EXPERIMENT)">
    <input>
      <namelist name="scm_bomex_nml">
        tracer_vert_advec_scheme = 4,
        temp_vert_advec_scheme = 4,
        momentum_vert_advec_scheme = 1,
        vert_advec_cond = .true.,
        do_rad = .true.,
        do_geo  =.true.,
        do_vadv =.true.,
        do_nudge =.false.,
        ustar_sfc = 0.28,
        flux_t_sfc = 9.52,
        flux_q_sfc = 153.4,
      </namelist>
    </input>
  </experiment>

  <experiment name="a00-BOMEX-am4p0" inherit="BOMEX_$(AWG_EXPERIMENT)"   >  
    <input>
      <namelist name="physics_driver_nml">
        do_mass_flux_diagnostic   = .true.,
        do_mass_flux_before_vdiff = .true.,
        do_mass_flux_after_vdiff  = .false.,         
      </namelist>
      <namelist name="mass_flux_nml">
        UP_NUM  =          10,
        DO_MF_MICRO     = F,
        Z_PBL_MIN       =   100.000000000000     ,
        W_STAR_MIN      =  0.100000000000000     ,
        ENT0    =  0.200000000000000     ,
        ENT_LENGTH      =   100.000000000000     ,
        Z0_OVER_Z_PBL   =  0.100000000000000     ,
        PWMIN   =   1.00000000000000     ,
        PWMAX   =   3.00000000000000     ,
        AW      =   1.00000000000000     ,
        BW      =   1.50000000000000,
        OPTION_SOLVER = "explicit"
        do_printouts = .false.
      </namelist>
    </input>
  </experiment>

  <experiment name="a00-GCSS_ARM-am4p0_rad" inherit="GCSS_ARM_$(AWG_EXPERIMENT)">
    <input>
      <namelist name="physics_driver_nml">
        do_radiation = .true.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .true.,
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 3600,
        use_single_lw_sw_ts = .false.,
      </namelist>
    </input>
  </experiment>

  <experiment name="b00-BOMEX-am4p0_rad" inherit="BOMEX_$(AWG_EXPERIMENT)">
    <input>
      <namelist name="physics_driver_nml">
        do_radiation = .true.
      </namelist>
      <namelist name="radiation_driver_nml">
        do_radiation = .true.,
        rad_time_step= 10800,
        rad_package = 'sea_esf',
        do_clear_sky_pass=.true.,
        !calc_hemi_integrals = .false.,
        renormalize_sw_fluxes=.true.,
        zenith_spec = 'diurnally_varying',
        using_restart_file = .false.
        do_conserve_energy = .true.
        sw_rad_time_step = 3600,
        use_single_lw_sw_ts = .false.,
      </namelist>
    </input>
  </experiment>



</experimentSuite>

